const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Sr=Object.defineProperty;var li=t=>{throw TypeError(t)};var Ar=(t,e,n)=>e in t?Sr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>Ar(t,typeof e!="symbol"?e+"":e,n),kn=(t,e,n)=>e.has(t)||li("Cannot "+n);var ne=(t,e,n)=>(kn(t,e,"read from private field"),n?n.call(t):e.get(t)),ze=(t,e,n)=>e.has(t)?li("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,i)=>(kn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),En=(t,e,n)=>(kn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ke(){}function Ir(t,e){for(const n in e)t[n]=e[n];return t}function or(t){return t()}function ai(){return Object.create(null)}function Ze(t){t.forEach(or)}function _n(t){return typeof t=="function"}function Ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let an;function Bt(t,e){return t===e?!0:(an||(an=document.createElement("a")),an.href=e,t===an.href)}function zr(t){return Object.keys(t).length===0}function Tr(t,...e){if(t==null){for(const i of e)i(void 0);return ke}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Dt(t){let e;return Tr(t,n=>e=n)(),e}function An(t,e,n,i){if(t){const r=lr(t,e,n,i);return t[0](r)}}function lr(t,e,n,i){return t[1]&&i?Ir(n.ctx.slice(),t[1](i(e))):n.ctx}function In(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function zn(t,e,n,i,r,s){if(r){const o=lr(e,n,i,s);t.p(o,r)}}function Tn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function ui(t){return t??""}function d(t,e){t.appendChild(e)}function G(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function Et(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function q(){return x(" ")}function pn(){return x("")}function me(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Rr(t){return Array.from(t.childNodes)}function ye(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ce(t,e){t.value=e??""}function ae(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function st(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function un(t){const e=t.querySelector(":checked");return e&&e.__value}function lt(t,e,n){t.classList.toggle(e,!!n)}function Or(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Ut;function Pt(t){Ut=t}function jn(){if(!Ut)throw new Error("Function called outside component initialization");return Ut}function $t(t){jn().$$.on_mount.push(t)}function xn(t){jn().$$.on_destroy.push(t)}function Lr(){const t=jn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=Or(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const kt=[],It=[];let Ct=[];const ci=[],Mr=Promise.resolve();let Rn=!1;function Fr(){Rn||(Rn=!0,Mr.then(De))}function rt(t){Ct.push(t)}const Cn=new Set;let yt=0;function De(){if(yt!==0)return;const t=Ut;do{try{for(;yt<kt.length;){const e=kt[yt];yt++,Pt(e),Dr(e.$$)}}catch(e){throw kt.length=0,yt=0,e}for(Pt(null),kt.length=0,yt=0;It.length;)It.pop()();for(let e=0;e<Ct.length;e+=1){const n=Ct[e];Cn.has(n)||(Cn.add(n),n())}Ct.length=0}while(kt.length);for(;ci.length;)ci.pop()();Rn=!1,Cn.clear(),Pt(t)}function Dr(t){if(t.fragment!==null){t.update(),Ze(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rt)}}function Nr(t){const e=[],n=[];Ct.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ct=e}const fn=new Set;let _t;function zt(){_t={r:0,c:[],p:_t}}function Tt(){_t.r||Ze(_t.c),_t=_t.p}function re(t,e){t&&t.i&&(fn.delete(t),t.i(e))}function he(t,e,n,i){if(t&&t.o){if(fn.has(t))return;fn.add(t),_t.c.push(()=>{fn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Pr(t,e){t.d(1),e.delete(t.key)}function Br(t,e){he(t,1,1,()=>{e.delete(t.key)})}function ar(t,e,n,i,r,s,o,a,l,h,u,g){let m=t.length,p=s.length,_=m;const k={};for(;_--;)k[t[_].key]=_;const B=[],E=new Map,M=new Map,U=[];for(_=p;_--;){const I=g(r,s,_),f=n(I);let c=o.get(f);c?U.push(()=>c.p(I,e)):(c=h(f,I),c.c()),E.set(f,B[_]=c),f in k&&M.set(f,Math.abs(_-k[f]))}const Y=new Set,Z=new Set;function K(I){re(I,1),I.m(a,u),o.set(I.key,I),u=I.first,p--}for(;m&&p;){const I=B[p-1],f=t[m-1],c=I.key,y=f.key;I===f?(u=I.first,m--,p--):E.has(y)?!o.has(c)||Y.has(c)?K(I):Z.has(y)?m--:M.get(c)>M.get(y)?(Z.add(c),K(I)):(Y.add(y),m--):(l(f,o),m--)}for(;m--;){const I=t[m];E.has(I.key)||l(I,o)}for(;p;)K(B[p-1]);return Ze(U),B}function Ge(t){t&&t.c()}function He(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),rt(()=>{const s=t.$$.on_mount.map(or).filter(_n);t.$$.on_destroy?t.$$.on_destroy.push(...s):Ze(s),t.$$.on_mount=[]}),r.forEach(rt)}function Ve(t,e){const n=t.$$;n.fragment!==null&&(Nr(n.after_update),Ze(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ur(t,e){t.$$.dirty[0]===-1&&(kt.push(t),Fr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Je(t,e,n,i,r,s,o=null,a=[-1]){const l=Ut;Pt(t);const h=t.$$={fragment:null,ctx:[],props:s,update:ke,not_equal:r,bound:ai(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ai(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(h.root);let u=!1;if(h.ctx=n?n(t,e.props||{},(g,m,...p)=>{const _=p.length?p[0]:m;return h.ctx&&r(h.ctx[g],h.ctx[g]=_)&&(!h.skip_bound&&h.bound[g]&&h.bound[g](_),u&&Ur(t,g)),m}):[],h.update(),u=!0,Ze(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){const g=Rr(e.target);h.fragment&&h.fragment.l(g),g.forEach(V)}else h.fragment&&h.fragment.c();e.intro&&re(t.$$.fragment),He(t,e.target,e.anchor),De()}Pt(l)}class Ye{constructor(){oe(this,"$$");oe(this,"$$set")}$destroy(){Ve(this,1),this.$destroy=ke}$on(e,n){if(!_n(n))return ke;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!zr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const jr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(jr);const wt=[];function On(t,e=ke){let n;const i=new Set;function r(a){if(Ue(t,a)&&(t=a,n)){const l=!wt.length;for(const h of i)h[1](),wt.push(h,t);if(l){for(let h=0;h<wt.length;h+=2)wt[h][0](wt[h+1]);wt.length=0}}}function s(a){r(a(t))}function o(a,l=ke){const h=[a,l];return i.add(h),i.size===1&&(n=e(r,s)||ke),a(t),()=>{i.delete(h),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}var xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ur={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(xr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},a=0,l={parse:function(f,c){var y=(c=c||{}).dynamicTyping||!1;if(I(y)&&(c.dynamicTypingFunction=y,y={}),c.dynamicTyping=y,c.transform=!!I(c.transform)&&c.transform,c.worker&&l.WORKERS_SUPPORTED){var T=function(){if(!l.WORKERS_SUPPORTED)return!1;var D=(ee=i.URL||i.webkitURL||null,F=n.toString(),l.BLOB_URL||(l.BLOB_URL=ee.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))),N=new i.Worker(D),ee,F;return N.onmessage=M,N.id=a++,o[N.id]=N}();return T.userStep=c.step,T.userChunk=c.chunk,T.userComplete=c.complete,T.userError=c.error,c.step=I(c.step),c.chunk=I(c.chunk),c.complete=I(c.complete),c.error=I(c.error),delete c.worker,void T.postMessage({input:f,config:c,workerId:T.id})}var R=null;return l.NODE_STREAM_INPUT,typeof f=="string"?(f=function(D){return D.charCodeAt(0)===65279?D.slice(1):D}(f),R=c.download?new g(c):new p(c)):f.readable===!0&&I(f.read)&&I(f.on)?R=new _(c):(i.File&&f instanceof File||f instanceof Object)&&(R=new m(c)),R.stream(f)},unparse:function(f,c){var y=!1,T=!0,R=",",D=`\r
`,N='"',ee=N+N,F=!1,w=null,L=!1;(function(){if(typeof c=="object"){if(typeof c.delimiter!="string"||l.BAD_DELIMITERS.filter(function(O){return c.delimiter.indexOf(O)!==-1}).length||(R=c.delimiter),(typeof c.quotes=="boolean"||typeof c.quotes=="function"||Array.isArray(c.quotes))&&(y=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(F=c.skipEmptyLines),typeof c.newline=="string"&&(D=c.newline),typeof c.quoteChar=="string"&&(N=c.quoteChar),typeof c.header=="boolean"&&(T=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");w=c.columns}c.escapeChar!==void 0&&(ee=c.escapeChar+N),(typeof c.escapeFormulae=="boolean"||c.escapeFormulae instanceof RegExp)&&(L=c.escapeFormulae instanceof RegExp?c.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var z=new RegExp(B(N),"g");if(typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(f)){if(!f.length||Array.isArray(f[0]))return j(null,f,F);if(typeof f[0]=="object")return j(w||Object.keys(f[0]),f,F)}else if(typeof f=="object")return typeof f.data=="string"&&(f.data=JSON.parse(f.data)),Array.isArray(f.data)&&(f.fields||(f.fields=f.meta&&f.meta.fields||w),f.fields||(f.fields=Array.isArray(f.data[0])?f.fields:typeof f.data[0]=="object"?Object.keys(f.data[0]):[]),Array.isArray(f.data[0])||typeof f.data[0]=="object"||(f.data=[f.data])),j(f.fields||[],f.data||[],F);throw new Error("Unable to serialize unrecognized input");function j(O,$,S){var C="";typeof O=="string"&&(O=JSON.parse(O)),typeof $=="string"&&($=JSON.parse($));var H=Array.isArray(O)&&0<O.length,W=!Array.isArray($[0]);if(H&&T){for(var ie=0;ie<O.length;ie++)0<ie&&(C+=R),C+=Q(O[ie],ie);0<$.length&&(C+=D)}for(var P=0;P<$.length;P++){var X=H?O.length:$[P].length,ue=!1,de=H?Object.keys($[P]).length===0:$[P].length===0;if(S&&!H&&(ue=S==="greedy"?$[P].join("").trim()==="":$[P].length===1&&$[P][0].length===0),S==="greedy"&&H){for(var te=[],pe=0;pe<X;pe++){var _e=W?O[pe]:pe;te.push($[P][_e])}ue=te.join("").trim()===""}if(!ue){for(var ce=0;ce<X;ce++){0<ce&&!de&&(C+=R);var Pe=H&&W?O[ce]:ce;C+=Q($[P][Pe],ce)}P<$.length-1&&(!S||0<X&&!de)&&(C+=D)}}return C}function Q(O,$){if(O==null)return"";if(O.constructor===Date)return JSON.stringify(O).slice(1,25);var S=!1;L&&typeof O=="string"&&L.test(O)&&(O="'"+O,S=!0);var C=O.toString().replace(z,ee);return(S=S||y===!0||typeof y=="function"&&y(O,$)||Array.isArray(y)&&y[$]||function(H,W){for(var ie=0;ie<W.length;ie++)if(-1<H.indexOf(W[ie]))return!0;return!1}(C,l.BAD_DELIMITERS)||-1<C.indexOf(R)||C.charAt(0)===" "||C.charAt(C.length-1)===" ")?N+C+N:C}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!r&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=E,l.ParserHandle=k,l.NetworkStreamer=g,l.FileStreamer=m,l.StringStreamer=p,l.ReadableStreamStreamer=_,i.jQuery){var h=i.jQuery;h.fn.parse=function(f){var c=f.config||{},y=[];return this.each(function(D){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)y.push({file:this.files[N],inputElem:this,instanceConfig:h.extend({},c)})}),T(),this;function T(){if(y.length!==0){var D,N,ee,F,w=y[0];if(I(f.before)){var L=f.before(w.file,w.inputElem);if(typeof L=="object"){if(L.action==="abort")return D="AbortError",N=w.file,ee=w.inputElem,F=L.reason,void(I(f.error)&&f.error({name:D},N,ee,F));if(L.action==="skip")return void R();typeof L.config=="object"&&(w.instanceConfig=h.extend(w.instanceConfig,L.config))}else if(L==="skip")return void R()}var z=w.instanceConfig.complete;w.instanceConfig.complete=function(j){I(z)&&z(j,w.file,w.inputElem),R()},l.parse(w.file,w.instanceConfig)}else I(f.complete)&&f.complete()}function R(){y.splice(0,1),T()}}}function u(f){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var y=Z(c);y.chunkSize=parseInt(y.chunkSize),c.step||c.chunk||(y.chunkSize=null),this._handle=new k(y),(this._handle.streamer=this)._config=y}).call(this,f),this.parseChunk=function(c,y){if(this.isFirstChunk&&I(this._config.beforeFirstChunk)){var T=this._config.beforeFirstChunk(c);T!==void 0&&(c=T)}this.isFirstChunk=!1,this._halted=!1;var R=this._partialLine+c;this._partialLine="";var D=this._handle.parse(R,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var N=D.meta.cursor;this._finished||(this._partialLine=R.substring(N-this._baseIndex),this._baseIndex=N),D&&D.data&&(this._rowCount+=D.data.length);var ee=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:D,workerId:l.WORKER_ID,finished:ee});else if(I(this._config.chunk)&&!y){if(this._config.chunk(D,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);D=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(D.data),this._completeResults.errors=this._completeResults.errors.concat(D.errors),this._completeResults.meta=D.meta),this._completed||!ee||!I(this._config.complete)||D&&D.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ee||D&&D.meta.paused||this._nextChunk(),D}this._halted=!0},this._sendError=function(c){I(this._config.error)?this._config.error(c):s&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:c,finished:!1})}}function g(f){var c;(f=f||{}).chunkSize||(f.chunkSize=l.RemoteChunkSize),u.call(this,f),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(y){this._input=y,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),r||(c.onload=K(this._chunkLoaded,this),c.onerror=K(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var y=this._config.downloadRequestHeaders;for(var T in y)c.setRequestHeader(T,y[T])}if(this._config.chunkSize){var R=this._start+this._config.chunkSize-1;c.setRequestHeader("Range","bytes="+this._start+"-"+R)}try{c.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}r&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:c.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(y){var T=y.getResponseHeader("Content-Range");return T===null?-1:parseInt(T.substring(T.lastIndexOf("/")+1))}(c),this.parseChunk(c.responseText)))},this._chunkError=function(y){var T=c.statusText||y;this._sendError(new Error(T))}}function m(f){var c,y;(f=f||{}).chunkSize||(f.chunkSize=l.LocalChunkSize),u.call(this,f);var T=typeof FileReader<"u";this.stream=function(R){this._input=R,y=R.slice||R.webkitSlice||R.mozSlice,T?((c=new FileReader).onload=K(this._chunkLoaded,this),c.onerror=K(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var R=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);R=y.call(R,this._start,D)}var N=c.readAsText(R,this._config.encoding);T||this._chunkLoaded({target:{result:N}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(c.error)}}function p(f){var c;u.call(this,f=f||{}),this.stream=function(y){return c=y,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var y,T=this._config.chunkSize;return T?(y=c.substring(0,T),c=c.substring(T)):(y=c,c=""),this._finished=!c,this.parseChunk(y)}}}function _(f){u.call(this,f=f||{});var c=[],y=!0,T=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){T&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):y=!0},this._streamData=K(function(R){try{c.push(typeof R=="string"?R:R.toString(this._config.encoding)),y&&(y=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(D){this._streamError(D)}},this),this._streamError=K(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=K(function(){this._streamCleanUp(),T=!0,this._streamData("")},this),this._streamCleanUp=K(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(f){var c,y,T,R=Math.pow(2,53),D=-R,N=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ee=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,w=0,L=0,z=!1,j=!1,Q=[],O={data:[],errors:[],meta:{}};if(I(f.step)){var $=f.step;f.step=function(P){if(O=P,H())C();else{if(C(),O.data.length===0)return;w+=P.data.length,f.preview&&w>f.preview?y.abort():(O.data=O.data[0],$(O,F))}}}function S(P){return f.skipEmptyLines==="greedy"?P.join("").trim()==="":P.length===1&&P[0].length===0}function C(){return O&&T&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),T=!1),f.skipEmptyLines&&(O.data=O.data.filter(function(P){return!S(P)})),H()&&function(){if(!O)return;function P(ue,de){I(f.transformHeader)&&(ue=f.transformHeader(ue,de)),Q.push(ue)}if(Array.isArray(O.data[0])){for(var X=0;H()&&X<O.data.length;X++)O.data[X].forEach(P);O.data.splice(0,1)}else O.data.forEach(P)}(),function(){if(!O||!f.header&&!f.dynamicTyping&&!f.transform)return O;function P(ue,de){var te,pe=f.header?{}:[];for(te=0;te<ue.length;te++){var _e=te,ce=ue[te];f.header&&(_e=te>=Q.length?"__parsed_extra":Q[te]),f.transform&&(ce=f.transform(ce,_e)),ce=W(_e,ce),_e==="__parsed_extra"?(pe[_e]=pe[_e]||[],pe[_e].push(ce)):pe[_e]=ce}return f.header&&(te>Q.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+Q.length+" fields but parsed "+te,L+de):te<Q.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+Q.length+" fields but parsed "+te,L+de)),pe}var X=1;return!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(P),X=O.data.length):O.data=P(O.data,0),f.header&&O.meta&&(O.meta.fields=Q),L+=X,O}()}function H(){return f.header&&Q.length===0}function W(P,X){return ue=P,f.dynamicTypingFunction&&f.dynamicTyping[ue]===void 0&&(f.dynamicTyping[ue]=f.dynamicTypingFunction(ue)),(f.dynamicTyping[ue]||f.dynamicTyping)===!0?X==="true"||X==="TRUE"||X!=="false"&&X!=="FALSE"&&(function(de){if(N.test(de)){var te=parseFloat(de);if(D<te&&te<R)return!0}return!1}(X)?parseFloat(X):ee.test(X)?new Date(X):X===""?null:X):X;var ue}function ie(P,X,ue,de){var te={type:P,code:X,message:ue};de!==void 0&&(te.row=de),O.errors.push(te)}this.parse=function(P,X,ue){var de=f.quoteChar||'"';if(f.newline||(f.newline=function(_e,ce){_e=_e.substring(0,1048576);var Pe=new RegExp(B(ce)+"([^]*?)"+B(ce),"gm"),be=(_e=_e.replace(Pe,"")).split("\r"),je=_e.split(`
`),Ke=1<je.length&&je[0].length<be[0].length;if(be.length===1||Ke)return`
`;for(var Te=0,se=0;se<be.length;se++)be[se][0]===`
`&&Te++;return Te>=be.length/2?`\r
`:"\r"}(P,de)),T=!1,f.delimiter)I(f.delimiter)&&(f.delimiter=f.delimiter(P),O.meta.delimiter=f.delimiter);else{var te=function(_e,ce,Pe,be,je){var Ke,Te,se,ve;je=je||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Qe=0;Qe<je.length;Qe++){var le=je[Qe],et=0,xe=0,Xe=0;se=void 0;for(var Oe=new E({comments:be,delimiter:le,newline:ce,preview:10}).parse(_e),Se=0;Se<Oe.data.length;Se++)if(Pe&&S(Oe.data[Se]))Xe++;else{var Le=Oe.data[Se].length;xe+=Le,se!==void 0?0<Le&&(et+=Math.abs(Le-se),se=Le):se=Le}0<Oe.data.length&&(xe/=Oe.data.length-Xe),(Te===void 0||et<=Te)&&(ve===void 0||ve<xe)&&1.99<xe&&(Te=et,Ke=le,ve=xe)}return{successful:!!(f.delimiter=Ke),bestDelimiter:Ke}}(P,f.newline,f.skipEmptyLines,f.comments,f.delimitersToGuess);te.successful?f.delimiter=te.bestDelimiter:(T=!0,f.delimiter=l.DefaultDelimiter),O.meta.delimiter=f.delimiter}var pe=Z(f);return f.preview&&f.header&&pe.preview++,c=P,y=new E(pe),O=y.parse(c,X,ue),C(),z?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,y.abort(),c=I(f.chunk)?"":c.substring(y.getCharIndex())},this.resume=function(){F.streamer._halted?(z=!1,F.streamer.parseChunk(c,!0)):setTimeout(F.resume,3)},this.aborted=function(){return j},this.abort=function(){j=!0,y.abort(),O.meta.aborted=!0,I(f.complete)&&f.complete(O),c=""}}function B(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(f){var c,y=(f=f||{}).delimiter,T=f.newline,R=f.comments,D=f.step,N=f.preview,ee=f.fastMode,F=c=f.quoteChar===void 0||f.quoteChar===null?'"':f.quoteChar;if(f.escapeChar!==void 0&&(F=f.escapeChar),(typeof y!="string"||-1<l.BAD_DELIMITERS.indexOf(y))&&(y=","),R===y)throw new Error("Comment character same as delimiter");R===!0?R="#":(typeof R!="string"||-1<l.BAD_DELIMITERS.indexOf(R))&&(R=!1),T!==`
`&&T!=="\r"&&T!==`\r
`&&(T=`
`);var w=0,L=!1;this.parse=function(z,j,Q){if(typeof z!="string")throw new Error("Input must be a string");var O=z.length,$=y.length,S=T.length,C=R.length,H=I(D),W=[],ie=[],P=[],X=w=0;if(!z)return Me();if(f.header&&!j){var ue=z.split(T)[0].split(y),de=[],te={},pe=!1;for(var _e in ue){var ce=ue[_e];I(f.transformHeader)&&(ce=f.transformHeader(ce,_e));var Pe=ce,be=te[ce]||0;for(0<be&&(pe=!0,Pe=ce+"_"+be),te[ce]=be+1;de.includes(Pe);)Pe=Pe+"_"+be;de.push(Pe)}if(pe){var je=z.split(T);je[0]=de.join(y),z=je.join(T)}}if(ee||ee!==!1&&z.indexOf(c)===-1){for(var Ke=z.split(T),Te=0;Te<Ke.length;Te++){if(P=Ke[Te],w+=P.length,Te!==Ke.length-1)w+=T.length;else if(Q)return Me();if(!R||P.substring(0,C)!==R){if(H){if(W=[],Xe(P.split(y)),ct(),L)return Me()}else Xe(P.split(y));if(N&&N<=Te)return W=W.slice(0,N),Me(!0)}}return Me()}for(var se=z.indexOf(y,w),ve=z.indexOf(T,w),Qe=new RegExp(B(F)+B(c),"g"),le=z.indexOf(c,w);;)if(z[w]!==c)if(R&&P.length===0&&z.substring(w,w+C)===R){if(ve===-1)return Me();w=ve+S,ve=z.indexOf(T,w),se=z.indexOf(y,w)}else if(se!==-1&&(se<ve||ve===-1))P.push(z.substring(w,se)),w=se+$,se=z.indexOf(y,w);else{if(ve===-1)break;if(P.push(z.substring(w,ve)),Le(ve+S),H&&(ct(),L))return Me();if(N&&W.length>=N)return Me(!0)}else for(le=w,w++;;){if((le=z.indexOf(c,le+1))===-1)return Q||ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:W.length,index:w}),Se();if(le===O-1)return Se(z.substring(w,le).replace(Qe,c));if(c!==F||z[le+1]!==F){if(c===F||le===0||z[le-1]!==F){se!==-1&&se<le+1&&(se=z.indexOf(y,le+1)),ve!==-1&&ve<le+1&&(ve=z.indexOf(T,le+1));var et=Oe(ve===-1?se:Math.min(se,ve));if(z.substr(le+1+et,$)===y){P.push(z.substring(w,le).replace(Qe,c)),z[w=le+1+et+$]!==c&&(le=z.indexOf(c,w)),se=z.indexOf(y,w),ve=z.indexOf(T,w);break}var xe=Oe(ve);if(z.substring(le+1+xe,le+1+xe+S)===T){if(P.push(z.substring(w,le).replace(Qe,c)),Le(le+1+xe+S),se=z.indexOf(y,w),le=z.indexOf(c,w),H&&(ct(),L))return Me();if(N&&W.length>=N)return Me(!0);break}ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:W.length,index:w}),le++}}else le++}return Se();function Xe(Ie){W.push(Ie),X=w}function Oe(Ie){var tt=0;if(Ie!==-1){var $e=z.substring(le+1,Ie);$e&&$e.trim()===""&&(tt=$e.length)}return tt}function Se(Ie){return Q||(Ie===void 0&&(Ie=z.substring(w)),P.push(Ie),w=O,Xe(P),H&&ct()),Me()}function Le(Ie){w=Ie,Xe(P),P=[],ve=z.indexOf(T,w)}function Me(Ie){return{data:W,errors:ie,meta:{delimiter:y,linebreak:T,aborted:L,truncated:!!Ie,cursor:X+(j||0)}}}function ct(){D(Me()),W=[],ie=[]}},this.abort=function(){L=!0},this.getCharIndex=function(){return w}}function M(f){var c=f.data,y=o[c.workerId],T=!1;if(c.error)y.userError(c.error,c.file);else if(c.results&&c.results.data){var R={abort:function(){T=!0,U(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Y,resume:Y};if(I(y.userStep)){for(var D=0;D<c.results.data.length&&(y.userStep({data:c.results.data[D],errors:c.results.errors,meta:c.results.meta},R),!T);D++);delete c.results}else I(y.userChunk)&&(y.userChunk(c.results,R,c.file),delete c.results)}c.finished&&!T&&U(c.workerId,c.results)}function U(f,c){var y=o[f];I(y.userComplete)&&y.userComplete(c),y.terminate(),delete o[f]}function Y(){throw new Error("Not implemented.")}function Z(f){if(typeof f!="object"||f===null)return f;var c=Array.isArray(f)?[]:{};for(var y in f)c[y]=Z(f[y]);return c}function K(f,c){return function(){f.apply(c,arguments)}}function I(f){return typeof f=="function"}return s&&(i.onmessage=function(f){var c=f.data;if(l.WORKER_ID===void 0&&c&&(l.WORKER_ID=c.workerId),typeof c.input=="string")i.postMessage({workerId:l.WORKER_ID,results:l.parse(c.input,c.config),finished:!0});else if(i.File&&c.input instanceof File||c.input instanceof Object){var y=l.parse(c.input,c.config);y&&i.postMessage({workerId:l.WORKER_ID,results:y,finished:!0})}}),(g.prototype=Object.create(u.prototype)).constructor=g,(m.prototype=Object.create(u.prototype)).constructor=m,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(u.prototype)).constructor=_,l})})(ur);var Wr=ur.exports;const Hr=qr(Wr),Vr="/zowser/idr-mark.svg",Kr="/zowser/nfdi4bioimage.png",Gr="/zowser/ssbd-logo.png",Ln="https://raw.githubusercontent.com/ome/ome2024-ngff-challenge/main/samples/ngff_samples.csv";let Jr={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://webknossos.org",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function fi(t){if(t==="IDR")return Vr;if(t==="SSBD")return Gr;let e=Jr[t];return e?e==="https://nfdi4bioimage.de/"?Kr:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function cr(t,e,n={}){Hr.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let o=i.data.map(p=>{let _={...n};for(let k=0;k<r.length;k++)_[r[k]]=p[k];return _}),a=o.filter(p=>{var _;return!((_=p.url)!=null&&_.endsWith(".csv"))}),l={};a.forEach(p=>{if(l[p.url]){console.warn("Removing duplicate URL:",p.url);return}l[p.url]=p}),a=Object.values(l);let h=o.filter(p=>{var _;return(_=p.url)==null?void 0:_.includes(".csv")}),u=a.reduce((p,_)=>_.wells?p+1:p,0),g=a.reduce((p,_)=>p+parseInt(_.written||0),0),m=a.length;u>0&&(m=a.reduce((p,_)=>p+parseInt(_.images||1),0)),e.addCsv(t,h,m,u,g),e.addRows(a),h.forEach(p=>{let _=p.url;p.csv=_,cr(_,e,p)})}})}async function Yr(t){return await fetch(t).then(e=>e.json())}function ut(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function Zr(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function Qr(t,e,n){const i=t[0].shape,r=i[0],s=i[1],o=r*s;e||(e=t.map(fr));let a=performance.now(),l=new Uint8ClampedArray(4*r*s).fill(0),h=0;for(let u=0;u<o;u++){for(let g=0;g<t.length;g++){let m=n[g],p=t[g].data,_=e[g],B=(p[u]-_[0])/(_[1]-_[0]);for(let E=0;E<3;E++){let M=B*m[E]<<0;l[h*4+E]=Math.max(l[h*4+E],M)}}l[h*4+3]=255,h+=1}return performance.now()-a<100&&$r(l,5)[4]<1&&(l=Xr(l,2)),l}function Xr(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function $r(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let o=t[s*4];o=Math.max(t[s*4+1],o),o=Math.max(t[s*4+2],o);let a=Math.floor(o/i);n[a]+=1}return n=n.map(s=>100*s/r),n}function fr(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=e[s];n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}const hn=4,at={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},es=[at.magenta,at.green],ts=[at.red,at.green,at.blue],hi=Object.values(at).slice(0,-2);function ns(t){let e;return t<=hn?e=Array(t).fill(!0):e=[...Array(hn).fill(!0),...Array(t-hn).fill(!1)],e}function is(t,e){let n=[];if(t==1)n=[at.white];else if(t==2)n=es;else if(t===3)n=ts;else if(t<=hn)n=hi.slice(0,t);else{n=Array(t).fill(at.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=hi[r]}return n.map(hr)}function hr(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class dr{constructor(){this.store=On({})}async lookupOntologyTerm(e){let n="",i="";e.includes("NCBITaxon")|e.includes("NCBI:txid")&&(n=e.replace("NCBI:txid",""),n=n.replace("obo:NCBITaxon_",""),i="NCBITaxon"),e.includes("FBbi")&&(n=e.replace("obo:FBbi_",""),n=n.replace("obo:FBbi:",""),n=n.replace("FBbi:",""),i="FBbi"),e.includes("NCIT_")&&(n=e.replace("NCIT_",""),i="NCIT"),e.includes("obo:MI_")&&(n=e.replace("obo:MI_",""),i="MI"),e.includes("obo:OBI_")&&(n=e.replace("obo:OBI_",""),i="OBI");let r=i+"_"+n,o=`https://www.ebi.ac.uk/ols4/api/ontologies/${i.toLowerCase()}/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${r}`;return(await Yr(o)).label||e}addTerms(e){let n=Dt(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}const _r=new dr,gr=new dr,di=5;async function jt(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],o=`${t}/${s.path}/0`,[a,l]=await jt(o);return[a,l,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await jt(s)}}class rs{constructor(e="index",n=!0){this.store=On([]),this.selectedRow=On(null),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0,o=r.plate_count||0,a=r.bytes||0;for(let l of r.child_csv)s+=l.image_count||0,o+=l.plate_count||0,a+=l.bytes||0;return{...r,image_count:s,plate_count:o,bytes:a}}):[]}addCsv(e,n,i,r,s){n=n.map(a=>({...a,child_csv:[]}));let o;for(let a of this.csvFiles){if(a.url===e){o=a;break}for(let l of a.child_csv){if(l.url===e){o=l;break}for(let h of l.child_csv)if(h.url===e){o=h;break}}}o?(o.image_count=i,o.plate_count=r,o.bytes=s,o.child_csv=n):(o={url:e,image_count:i,plate_count:r,bytes:s,child_csv:n},this.csvFiles.push(o))}addRows(e){e=e.map((r,s)=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let o=r.shape.split(",").map(l=>parseInt(l)),a;r.dimension_names?a=r.dimension_names.split(","):o.length==5&&(a=["t","c","z","y","x"]),a&&a.length==o.length&&a.forEach((l,h)=>r["size_"+l]=o[h]),r.dim_count=o.reduce((l,h)=>l+(h>1?1:0),0)}if(r.chunks){let o=r.chunks.split(",").map(a=>parseInt(a));r.chunk_pixels=o.reduce((a,l)=>a*l,1)}if(r.shards){let o=r.shards.split(",").map(a=>parseInt(a));r.shard_pixels=o.reduce((a,l)=>a*l,1)}return r.index=Math.random()*(1+s),r}),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,o)=>this.compareRows(s,o,!0)),r));let n=e.map(r=>r.organismId);_r.addTerms(n);let i=e.map(r=>r.fbbiId);gr.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var m;const[n,i,r]=await jt(e);let s=[],o=0,a=0,l=!1,h=!0,u={multiscales:n},g=i;if(r&&(o=r.wells.length,a=r.field_count||1),n){const p=(m=n[0])==null?void 0:m.datasets[0],_=p==null?void 0:p.path;if(_){const k=await fetch(`${i}/${_}/zarr.json`).then(B=>B.json()).catch(B=>{console.log(`----> Failed to parse ${i}/${_}/zarr.json`,B)});s=k==null?void 0:k.shape}}else console.log("No multiscales found"),l=!0,s=[0];this.populateRow(e,{image_attrs:u,image_url:g,shape:s,well_count:o,field_count:a,load_failed:l,loaded:h})}async loadRocrateJsonAllRows(){let e=Dt(this.store);for(let n=0;n<e.length;n=n+di){let i=Zr(n,Math.min(n+di,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let o=0;return i?o=r-s:o=r.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){console.log("sortTable",e,n),this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,o)=>this.compareRows(s,o,i)),r))}isColumnNumeric(e){let n=Dt(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return Dt(this.store)}getRow(e){return Dt(this.store)[e]}subscribeSelectedRow(e){return this.selectedRow.subscribe(e)}setSelectedRow(e){this.selectedRow.set(e)}}const Ae=new rs;function ss(t){let e,n,i,r,s,o;return{c(){e=v("button"),n=v("span"),n.textContent="^",i=q(),r=v("span"),r.textContent="^",b(n,"class","acc svelte-17vd65t"),lt(n,"strong",t[1]),b(r,"class","dec svelte-17vd65t"),lt(r,"strong",!t[1]),b(e,"class","svelte-17vd65t")},m(a,l){G(a,e,l),d(e,n),d(e,i),d(e,r),s||(o=me(e,"click",t[2]),s=!0)},p(a,[l]){l&2&&lt(n,"strong",a[1]),l&2&&lt(r,"strong",!a[1])},i:ke,o:ke,d(a){a&&V(e),s=!1,o()}}}function os(t,e,n){let{toggleAscending:i}=e,{sortAscending:r}=e;const s=()=>i();return t.$$set=o=>{"toggleAscending"in o&&n(0,i=o.toggleAscending),"sortAscending"in o&&n(1,r=o.sortAscending)},[i,r,s]}class ls extends Ye{constructor(e){super(),Je(this,e,os,ss,Ue,{toggleAscending:0,sortAscending:1})}}const cn={AUTO:"auto",START:"start",CENTER:"center",END:"end"},it={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Mt={OBSERVED:0,REQUESTED:1},as={[it.VERTICAL]:"top",[it.HORIZONTAL]:"left"},_i={[it.VERTICAL]:"scrollTop",[it.HORIZONTAL]:"scrollLeft"};class us{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=cn.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),o=s.offset,a=o-n+s.size;let l;switch(e){case cn.END:l=a;break;case cn.CENTER:l=o-(n-s.size)/2;break;case cn.START:l=o;break;default:l=Math.max(a,Math.min(o,i))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,l))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const a=this.getSizeAndPositionForIndex(o);n=a.offset+a.size;let l=o;for(;n<s&&l<this.itemCount-1;)l++,n+=this.getSizeAndPositionForIndex(l).size;return i&&(o=Math.max(0,o-i),l=Math.min(l+i,this.itemCount-1)),{start:o,stop:l}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const cs=t=>({}),gi=t=>({});function mi(t,e,n){const i=t.slice();return i[37]=e[n],i}const fs=t=>({style:t[0]&4,index:t[0]&4}),pi=t=>({style:t[37].style,index:t[37].index}),hs=t=>({}),bi=t=>({});function vi(t,e){let n,i;const r=e[21].item,s=An(r,e,e[20],pi);return{key:t,first:null,c(){n=pn(),s&&s.c(),this.first=n},m(o,a){G(o,n,a),s&&s.m(o,a),i=!0},p(o,a){e=o,s&&s.p&&(!i||a[0]&1048580)&&zn(s,r,e,e[20],i?In(r,e[20],a,fs):Tn(e[20]),pi)},i(o){i||(re(s,o),i=!0)},o(o){he(s,o),i=!1},d(o){o&&V(n),s&&s.d(o)}}}function ds(t){let e,n,i,r=[],s=new Map,o,a;const l=t[21].header,h=An(l,t,t[20],bi);let u=Ne(t[2]);const g=_=>_[0]?_[0](_[37].index):_[37].index;for(let _=0;_<u.length;_+=1){let k=mi(t,u,_),B=g(k);s.set(B,r[_]=vi(B,k))}const m=t[21].footer,p=An(m,t,t[20],gi);return{c(){e=v("div"),h&&h.c(),n=q(),i=v("div");for(let _=0;_<r.length;_+=1)r[_].c();o=q(),p&&p.c(),b(i,"class","virtual-list-inner svelte-dwpad5"),b(i,"style",t[4]),b(e,"class","virtual-list-wrapper svelte-dwpad5"),b(e,"style",t[3])},m(_,k){G(_,e,k),h&&h.m(e,null),d(e,n),d(e,i);for(let B=0;B<r.length;B+=1)r[B]&&r[B].m(i,null);d(e,o),p&&p.m(e,null),t[22](e),a=!0},p(_,k){h&&h.p&&(!a||k[0]&1048576)&&zn(h,l,_,_[20],a?In(l,_[20],k,hs):Tn(_[20]),bi),k[0]&1048581&&(u=Ne(_[2]),zt(),r=ar(r,k,g,1,_,u,s,i,Br,vi,null,mi),Tt()),(!a||k[0]&16)&&b(i,"style",_[4]),p&&p.p&&(!a||k[0]&1048576)&&zn(p,m,_,_[20],a?In(m,_[20],k,cs):Tn(_[20]),gi),(!a||k[0]&8)&&b(e,"style",_[3])},i(_){if(!a){re(h,_);for(let k=0;k<u.length;k+=1)re(r[k]);re(p,_),a=!0}},o(_){he(h,_);for(let k=0;k<r.length;k+=1)he(r[k]);he(p,_),a=!1},d(_){_&&V(e),h&&h.d(_);for(let k=0;k<r.length;k+=1)r[k].d();p&&p.d(_),t[22](null)}}}const _s=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function gs(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:a}=e,{itemSize:l}=e,{estimatedItemSize:h=null}=e,{stickyIndices:u=null}=e,{getKey:g=null}=e,{scrollDirection:m=it.VERTICAL}=e,{scrollOffset:p=null}=e,{scrollToIndex:_=null}=e,{scrollToAlignment:k=null}=e,{scrollToBehaviour:B="instant"}=e,{overscanCount:E=3}=e;const M=Lr(),U=new us({itemCount:a,itemSize:l,estimatedItemSize:Q()});let Y=!1,Z,K=[],I={offset:p||_!=null&&K.length&&L(_)||0,scrollChangeReason:Mt.REQUESTED},f=I,c={scrollToIndex:_,scrollToAlignment:k,scrollOffset:p,itemCount:a,itemSize:l,estimatedItemSize:h},y={},T="",R="";ee(),$t(()=>{n(18,Y=!0),Z.addEventListener("scroll",z,_s),p!=null?F(p):_!=null&&F(L(_))}),xn(()=>{Y&&Z.removeEventListener("scroll",z)});function D(){if(!Y)return;const S=c.scrollToIndex!==_||c.scrollToAlignment!==k,C=c.itemCount!==a||c.itemSize!==l||c.estimatedItemSize!==h;C&&(U.updateConfig({itemSize:l,itemCount:a,estimatedItemSize:Q()}),w()),c.scrollOffset!==p?n(19,I={offset:p||0,scrollChangeReason:Mt.REQUESTED}):typeof _=="number"&&(S||C)&&n(19,I={offset:L(_,k,a),scrollChangeReason:Mt.REQUESTED}),c={scrollToIndex:_,scrollToAlignment:k,scrollOffset:p,itemCount:a,itemSize:l,estimatedItemSize:h}}function N(){if(!Y)return;const{offset:S,scrollChangeReason:C}=I;(f.offset!==S||f.scrollChangeReason!==C)&&ee(),f.offset!==S&&C===Mt.REQUESTED&&F(S),f=I}function ee(){const{offset:S}=I,{start:C,stop:H}=U.getVisibleRange({containerSize:m===it.VERTICAL?s:o,offset:S,overscanCount:E});let W=[];const ie=U.getTotalSize();m===it.VERTICAL?(n(3,T=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,R=`flex-direction:column;height:${ie}px;`)):(n(3,T=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,R=`min-height:100%;width:${ie}px;`));const P=u!=null&&u.length!==0;if(P)for(let X=0;X<u.length;X++){const ue=u[X];W.push({index:ue,style:O(ue,!0)})}if(C!==void 0&&H!==void 0){for(let X=C;X<=H;X++)P&&u.includes(X)||W.push({index:X,style:O(X,!1)});M("itemsUpdated",{start:C,end:H})}n(2,K=W)}function F(S){"scroll"in Z?Z.scroll({[as[m]]:S,behavior:B}):n(1,Z[_i[m]]=S,Z)}function w(S=0){y={},U.resetItem(S),ee()}function L(S,C=k,H=a){return(S<0||S>=H)&&(S=0),U.getUpdatedOffsetForIndex({align:C,containerSize:m===it.VERTICAL?s:o,currentOffset:I.offset||0,targetIndex:S})}function z(S){const C=j();C<0||I.offset===C||S.target!==Z||(n(19,I={offset:C,scrollChangeReason:Mt.OBSERVED}),M("afterScroll",{offset:C,event:S}))}function j(){return Z[_i[m]]}function Q(){return h||typeof l=="number"&&l||50}function O(S,C){if(y[S])return y[S];const{size:H,offset:W}=U.getSizeAndPositionForIndex(S);let ie;return m===it.VERTICAL?(ie=`left:0;width:100%;height:${H}px;`,C?ie+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${W}px;margin-bottom:${-(W+H)}px;`:ie+=`position:absolute;top:${W}px;`):(ie=`top:0;width:${H}px;`,C?ie+=`position:sticky;z-index:1;left:0;margin-left:${W}px;margin-right:${-(W+H)}px;`:ie+=`position:absolute;height:100%;left:${W}px;`),y[S]=ie}function $(S){It[S?"unshift":"push"](()=>{Z=S,n(1,Z)})}return t.$$set=S=>{"height"in S&&n(5,s=S.height),"width"in S&&n(6,o=S.width),"itemCount"in S&&n(7,a=S.itemCount),"itemSize"in S&&n(8,l=S.itemSize),"estimatedItemSize"in S&&n(9,h=S.estimatedItemSize),"stickyIndices"in S&&n(10,u=S.stickyIndices),"getKey"in S&&n(0,g=S.getKey),"scrollDirection"in S&&n(11,m=S.scrollDirection),"scrollOffset"in S&&n(12,p=S.scrollOffset),"scrollToIndex"in S&&n(13,_=S.scrollToIndex),"scrollToAlignment"in S&&n(14,k=S.scrollToAlignment),"scrollToBehaviour"in S&&n(15,B=S.scrollToBehaviour),"overscanCount"in S&&n(16,E=S.overscanCount),"$$scope"in S&&n(20,r=S.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&D(),t.$$.dirty[0]&524288&&N(),t.$$.dirty[0]&263264&&Y&&w(0)},[g,Z,K,T,R,s,o,a,l,h,u,m,p,_,k,B,E,w,Y,I,r,i,$]}class ms extends Ye{constructor(e){super(),Je(this,e,gs,ds,Ue,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),De()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),De()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),De()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),De()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),De()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),De()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),De()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),De()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),De()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),De()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),De()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),De()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),De()}get recomputeSizes(){return this.$$.ctx[17]}}class en extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class qn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const ps="modulepreload",bs=function(t){return"/zowser/"+t},yi={},Ft=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=bs(a),a in yi)return;yi[a]=!0;const l=a.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":ps,l||(u.as="script"),u.crossOrigin="",u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((g,m)=>{u.addEventListener("load",g),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var We;class mr{constructor(e,n,i){ze(this,We);typeof e=="number"?Ee(this,We,new Uint8Array(e)):e instanceof ArrayBuffer?Ee(this,We,new Uint8Array(e,n,i)):Ee(this,We,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return ne(this,We).byteOffset}get byteLength(){return ne(this,We).byteLength}get buffer(){return ne(this,We).buffer}get length(){return ne(this,We).length}get(e){let n=ne(this,We)[e];return typeof n=="number"?n!==0:n}set(e,n){ne(this,We)[e]=n?1:0}fill(e){ne(this,We).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}We=new WeakMap;var St;class Wn{constructor(e,n,i,r){oe(this,"_data");oe(this,"chars");ze(this,St);if(this.chars=e,Ee(this,St,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set(ne(this,St).encode(n))}fill(e){const n=ne(this,St).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}St=new WeakMap;var Re;const Yn=class Yn{constructor(e,n,i,r){ze(this,Re);oe(this,"chars");if(this.chars=e,typeof n=="number")Ee(this,Re,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),Ee(this,Re,new Int32Array(n,i,r));else{const s=n,o=new Yn(e,1);Ee(this,Re,new Int32Array(function*(){for(let a of s)o.set(0,a),yield*ne(o,Re)}()))}}get BYTES_PER_ELEMENT(){return ne(this,Re).BYTES_PER_ELEMENT*this.chars}get byteLength(){return ne(this,Re).byteLength}get byteOffset(){return ne(this,Re).byteOffset}get buffer(){return ne(this,Re).buffer}get length(){return ne(this,Re).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint(ne(this,Re)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=ne(this,Re).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=ne(this,Re).subarray(0,this.chars);for(let i=1;i<this.length;i++)ne(this,Re).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Re=new WeakMap;let xt=Yn;function tn(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function wi(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}const vs={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:mr},ys=/v2:([US])(\d+)/;function pr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(ys);if(e){let[,i,r]=e;return(i==="U"?xt:Wn).bind(null,Number(r))}let n=vs[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function pt(t,e){return(e==="C"?ws:ks)(t)}function ws(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function ks(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function Es({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Mn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Cs=/^([<|>])(.*)$/;function Ss(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Cs);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function As(t,e={}){let n=[],i=Ss(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function Is(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function zs(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Ts(t){return(t==null?void 0:t.name)==="sharding_indexed"}function br(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const ki=Rs();function Rs(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function Ei(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var qt,ot,Wt,Ht,At;const Zn=class Zn{constructor(e,n){oe(this,"kind","array_to_bytes");ze(this,qt);ze(this,ot);ze(this,Wt);ze(this,Ht);ze(this,At);Ee(this,At,e==null?void 0:e.endian),Ee(this,ot,pr(n.data_type)),Ee(this,Ht,n.shape),Ee(this,qt,pt(n.shape,Mn(n.codecs)));const i=new(ne(this,ot))(0);Ee(this,Wt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new Zn(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return ki&&ne(this,At)==="big"&&wi(n,Ei(ne(this,ot))),n}decode(e){return ki&&ne(this,At)==="big"&&wi(e,Ei(ne(this,ot))),{data:new(ne(this,ot))(e.buffer,e.byteOffset,e.byteLength/ne(this,Wt)),shape:ne(this,Ht),stride:ne(this,qt)}}};qt=new WeakMap,ot=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,At=new WeakMap;let gn=Zn;class Hn{constructor(){oe(this,"kind","bytes_to_bytes")}static fromConfig(){return new Hn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function Os(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function Ls(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Vt,Kt;const Qn=class Qn{constructor(e={}){oe(this,"configuration");oe(this,"kind","array_to_bytes");ze(this,Vt);ze(this,Kt);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:a=!0,indent:l,strict:h=!0}=e;let u=e.separators;u||(l?u=[", ",": "]:u=[",",":"]),Ee(this,Vt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:l,separators:u,sort_keys:a}),Ee(this,Kt,{strict:h})}static fromConfig(e){return new Qn(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:a}=ne(this,Vt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const l=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||l.push(Os),a&&l.push(Ls);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let u;l.length&&(u=(m,p)=>{let _=p;for(let k of l)_=k(m,_);return _});let g=JSON.stringify(h,u,n);return r&&(g=g.replace(/[\u007F-\uFFFF]/g,m=>{const p=`0000${m.charCodeAt(0).toString(16)}`;return`\\u${p.substring(p.length-4)}`})),new TextEncoder().encode(g)}decode(e){const{strict:n}=ne(this,Kt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=tn(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=pt(r,"C");return{data:i,shape:r,stride:s}}};Vt=new WeakMap,Kt=new WeakMap;let Fn=Qn;function Ci(t){return t instanceof mr||t instanceof Wn||t instanceof xt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Ms(t,e){let n;return t.data instanceof Wn||t.data instanceof xt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:pt(t.shape,e)}}function Fs(t,e){let n=Ms(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=Ci(t.data),a=Ci(n.data);for(let l=0;l<r;l++){let h=0;for(let u=0;u<i;u++)h+=s[u]*n.stride[u];a[h]=o[l],s[0]+=1;for(let u=0;u<i;u++)if(s[u]===t.shape[u]){if(u+1===i)break;s[u]=0,s[u+1]+=1}}return n}function Ds(t){if(!t.stride)return"C";let e=pt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Vn{constructor(e){oe(this,"configuration");oe(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Vn(e)}encode(e){var n,i;return Ds(e)===((n=this.configuration)==null?void 0:n.order)?e:Fs(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var Gt,Jt;const Xn=class Xn{constructor(e){oe(this,"kind","array_to_bytes");ze(this,Gt);ze(this,Jt);Ee(this,Gt,e),Ee(this,Jt,pt(e,"C"))}static fromConfig(e,n){return new Xn(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let a=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+a)),s+=a}return{data:r,shape:ne(this,Gt),stride:ne(this,Jt)}}};Gt=new WeakMap,Jt=new WeakMap;let Dn=Xn;function Ns(){return new Map().set("blosc",()=>Ft(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>Ft(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>Ft(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>Ft(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>Ft(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Vn).set("bytes",()=>gn).set("crc32c",()=>Hn).set("vlen-utf8",()=>Dn).set("json2",()=>Fn)}const Ps=Ns();function Nn(t){let e;return{async encode(n){e||(e=await Si(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Si(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Si(t){let e=t.codecs.map(async s=>{var a;let o=await((a=Ps.get(s.name))==null?void 0:a());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let a=s.fromConfig(o.configuration,t);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":i=a;break;default:r.push(a)}}if(!i){if(!Bs(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=gn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function Bs(t){return t.data_type!=="v2:object"}const Ai=18446744073709551615n;function Us(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((l,h)=>l/i.chunk_shape[h]),o=Nn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),a={};return async l=>{let h=l.map((M,U)=>Math.floor(M/s[U])),u=t.resolve(n(h)).path,g;if(u in a)g=a[u];else{let M=4,U=16*s.reduce((Z,K)=>Z*K,1),Y=await r(u,{suffixLength:U+M});g=a[u]=Y?await o.decode(Y):null}if(g===null)return;let{data:m,shape:p,stride:_}=g,k=l.map((M,U)=>M%p[U]).reduce((M,U,Y)=>M+U*_[Y],0),B=m[k],E=m[k+1];if(!(B===Ai&&E===Ai))return r(u,{offset:Number(B),length:Number(E)})}}class Rt{constructor(e,n="/"){oe(this,"store");oe(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Rt(this.store,new URL(e,n).pathname)}}var Yt;class Kn extends Rt{constructor(n,i,r){super(n,i);oe(this,"kind","group");ze(this,Yt);Ee(this,Yt,r)}get attrs(){return ne(this,Yt).attributes}}Yt=new WeakMap;const Nt=Symbol("zarrita.context");function js(t){return t[Nt]}function xs(t,e){let{configuration:n}=e.codecs.find(Ts)??{},i={encode_chunk_key:Es(e.chunk_key_encoding),TypedArray:pr(e.data_type),fill_value:e.fill_value};if(n){let s=Mn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:Nn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,a){return pt(o,a??s)},get_chunk_bytes:Us(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=Mn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:Nn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return pt(s,o??r)},async get_chunk_bytes(s,o){let a=i.encode_chunk_key(s),l=t.resolve(a).path;return t.store.get(l,o)}}}var ir,rr,mt,sr;let mn=(sr=class extends(rr=Rt,ir=Nt,rr){constructor(n,i,r){super(n,i);oe(this,"kind","array");ze(this,mt);oe(this,ir);Ee(this,mt,{...r,fill_value:br(r)}),this[Nt]=xs(this,r)}get attrs(){return ne(this,mt).attributes}get shape(){return ne(this,mt).shape}get chunks(){return this[Nt].chunk_shape}get dtype(){return ne(this,mt).data_type}async getChunk(n,i){let r=this[Nt],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((l,h)=>l*h,1),a=new r.TypedArray(o);return a.fill(r.fill_value),{data:a,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return zs(this.dtype,n)}},mt=new WeakMap,sr),bn=qs();function qs(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function Ws(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?tn(e):{}}async function Hs(t,e={}){let n="store"in t?t:new Rt(t),i={};return(e.attrs??!0)&&(i=await Ws(n)),e.kind==="array"?Ii(n,i):e.kind==="group"?zi(n,i):Ii(n,i).catch(r=>{if(r instanceof en)return zi(n,i);throw r})}async function Ii(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new en("v2 array",{cause:new qn(n)});return bn.increment(t.store,"v2"),new mn(t.store,t.path,As(tn(i),e))}async function zi(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new en("v2 group",{cause:new qn(n)});return bn.increment(t.store,"v2"),new Kn(t.store,t.path,Is(tn(i),e))}async function Vs(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new en("v3 array or group",{cause:new qn(n)});let r=tn(i);return r.node_type==="array"&&(r.fill_value=br(r)),r.node_type==="array"?new mn(e,t.path,r):new Kn(e,t.path,r)}async function Ks(t,e={}){let n="store"in t?t:new Rt(t),i=await Vs(n);if(bn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof mn||e.kind==="group"&&i instanceof Kn)return i;let r=i instanceof mn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function gt(t,e={}){let n="store"in t?t.store:t,i=bn.version_max(n),r=i==="v2"?gt.v2:gt.v3,s=i==="v2"?gt.v3:gt.v2;return r(t,e).catch(o=>{if(o instanceof en)return s(t,e);throw o})}gt.v2=Hs;gt.v3=Ks;function*Gs(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*Js(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function Ys({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function Pn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function Zs(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class Gn extends Error{constructor(e){super(e),this.name="IndexError"}}function Qs(t,e){throw new Gn(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function Xs(t){throw new Gn(`index out of bounds for dimension with length ${t}`)}function $s(){throw new Gn("only slices with step >= 1 are supported")}function eo(t,e){t.length>e.length&&Qs(t,e)}function to(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&Xs(e),t}class no{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){oe(this,"dim_sel");oe(this,"dim_len");oe(this,"dim_chunk_len");oe(this,"nitems");e=to(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Ti{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){oe(this,"start");oe(this,"stop");oe(this,"step");oe(this,"dim_len");oe(this,"dim_chunk_len");oe(this,"nitems");oe(this,"nchunks");const[r,s,o]=Ys(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&$s(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of Gs(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let a=0,l=0;if(this.start<r){const p=(r-this.start)%this.step;p&&(l+=this.step-p),a=Math.ceil((r-this.start)/this.step)}else l=this.start-r;const h=this.stop>s?o:this.stop-r,u=[l,h,this.step],g=Math.ceil((h-l)/this.step),m=[a,a+g,1];yield{dim_chunk_ix:i,dim_chunk_sel:u,dim_out_sel:m}}}}function io(t,e){let n=[];return t===null?n=e.map(i=>Pn(null)):Array.isArray(t)&&(n=t.map(i=>i??Pn(null))),eo(n,e),n}class ro{constructor({selection:e,shape:n,chunk_shape:i}){oe(this,"dim_indexers");oe(this,"shape");this.dim_indexers=io(e,n).map((r,s)=>new(typeof r=="number"?no:Ti)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Ti).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of Js(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function so(t,e){return"get"in t?t.get(e):t[e]}async function oo(t,e,n,i){var l;let r=js(t),s=new ro({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((h,u)=>h*u,1)),s.shape,r.get_strides(s.shape,n.order)),a=((l=n.create_queue)==null?void 0:l.call(n))??Zs();for(const{chunk_coords:h,mapping:u}of s)a.add(async()=>{let{data:g,shape:m,stride:p}=await t.getChunk(h,n.opts),_=i.prepare(g,m,p);i.set_from_chunk(o,_,u)});return await a.onIdle(),s.shape.length===0?so(o.data,0):o}function Jn(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return Jn(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function Sn(t){return globalThis.Array.isArray(t.data)?{data:Jn(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function lo(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function ao(t,e){if(globalThis.Array.isArray(t.data))return Jn([e]);let n=lo(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const uo={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=Sn(t);Bn(i,e,ao(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=Sn(t);dn(i,Sn(e),i.bytes_per_element,n)}};async function co(t,e=null,n={}){return oo(t,e,n,uo)}function vr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Bn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...a]=t.stride;if(typeof r=="number"){const m=t.data.subarray(o*r*i);Bn({data:m,stride:a},s,n,i);return}const[l,h,u]=r,g=vr(l,h,u);if(s.length===0){for(let m=0;m<g;m++)t.data.set(n,o*(l+u*m)*i);return}for(let m=0;m<g;m++){const p=t.data.subarray(o*(l+u*m)*i);Bn({data:p,stride:a},s,n,i)}}function dn(t,e,n,i){const[r,...s]=i,[o,...a]=t.stride,[l,...h]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}dn({data:t.data.subarray(o*r.to*n),stride:a},e,n,s);return}if(r.to===null){if(s.length===0){let E=r.from*n;t.data.set(e.data.subarray(E,E+n),0);return}dn(t,{data:e.data.subarray(l*r.from*n),stride:h},n,s);return}const[u,g,m]=r.to,[p,_,k]=r.from,B=vr(u,g,m);if(s.length===0){if(m===1&&k===1&&o===1&&l===1){let E=p*n,M=B*n;t.data.set(e.data.subarray(E,E+M),u*n);return}for(let E=0;E<B;E++){let M=l*(p+k*E)*n;t.data.set(e.data.subarray(M,M+n),o*(u+m*E)*n)}return}for(let E=0;E<B;E++)dn({data:t.data.subarray(o*(u+E*m)*n),stride:a},{data:e.data.subarray(l*(p+E*k)*n),stride:h},n,s)}function yr(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function fo(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Ri(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function Oi(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function ho(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return yr(t,o-e,o,n)}var Zt,Qt,Xt,Un;class _o{constructor(e,n={}){ze(this,Xt);oe(this,"url");ze(this,Zt);ze(this,Qt);this.url=e,Ee(this,Zt,n.overrides??{}),Ee(this,Qt,n.useSuffixRequest??!1)}async get(e,n={}){let i=Ri(this.url,e).href,r=await fetch(i,En(this,Xt,Un).call(this,n));return Oi(r)}async getRange(e,n,i={}){let r=Ri(this.url,e),s=En(this,Xt,Un).call(this,i),o;return"suffixLength"in n?o=await ho(r,n.suffixLength,s,ne(this,Qt)):o=await yr(r,n.offset,n.length,s),Oi(o)}}Zt=new WeakMap,Qt=new WeakMap,Xt=new WeakSet,Un=function(e){return fo(ne(this,Zt),e)};function go(t){let e,n;return{c(){e=v("div"),n=v("canvas"),ae(n,"width",t[3]+"px"),ae(n,"height",t[4]+"px"),ae(n,"background-color","lightgrey"),b(n,"height",t[2]),b(n,"width",t[1]),b(n,"class","svelte-lwhhyg"),b(e,"class","canvasWrapper svelte-lwhhyg"),ae(e,"width",t[3]+"px"),ae(e,"height",t[4]+"px"),lt(e,"spinner",t[5])},m(i,r){G(i,e,r),d(e,n),t[12](n)},p(i,[r]){r&8&&ae(n,"width",i[3]+"px"),r&16&&ae(n,"height",i[4]+"px"),r&4&&b(n,"height",i[2]),r&2&&b(n,"width",i[1]),r&8&&ae(e,"width",i[3]+"px"),r&16&&ae(e,"height",i[4]+"px"),r&32&&lt(e,"spinner",i[5])},i:ke,o:ke,d(i){i&&V(e),t[12](null)}}}function mo(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{cssSize:a=120}=e,{max_size:l=512}=e,h,u=a,g=a;o>1?g=u/o:o<1&&(u=g*o);let m=u,p=g,_=!0;const k=new AbortController;async function B(){var z;let M=r.multiscales[0].datasets.map(j=>j.path),U=r.multiscales[0].axes.map(j=>j.name),Y=M.at(-1);s!=null&&s<M.length&&(Y=M[s]);const Z=new _o(i+"/"+Y),K=await gt.v3(Z,{kind:"array"});let I=U.indexOf("c"),f=K.shape;if(f.at(-1)*f.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",f,i);return}let c=f.length,y=f[I]||1,T,R;(z=r==null?void 0:r.omero)!=null&&z.channels?(T=r.omero.channels.map(j=>j.active),R=r.omero.channels.map(j=>hr(j.color))):(T=ns(y),R=is(y,T)),R=R.filter((j,Q)=>T[Q]);let N=T.reduce((j,Q,O)=>(Q&&j.push(O),j),[]).map(j=>{let Q=f.map((O,$)=>$==I?j:$>=c-2?Pn(0,O):U[$]=="z"||U[$]=="t"?parseInt(O/2+""):0);return co(K,Q,{opts:{signal:k.signal}})}),ee=await Promise.all(N),F=ee.map(j=>fr(j)),w=Qr(ee,F,R);n(1,u=f.at(-1)),n(2,g=f.at(-2));let L=u/a;g>u&&(L=g/a),n(3,m=u/L),n(4,p=g/L),setTimeout(()=>{const j=h.getContext("2d");n(5,_=!1),j.putImageData(new ImageData(w,u,g),0,0)},100)}$t(()=>{B()}),xn(()=>{k.abort()});function E(M){It[M?"unshift":"push"](()=>{h=M,n(0,h)})}return t.$$set=M=>{"source"in M&&n(6,i=M.source),"attrs"in M&&n(7,r=M.attrs),"thumbDatasetIndex"in M&&n(8,s=M.thumbDatasetIndex),"thumbAspectRatio"in M&&n(9,o=M.thumbAspectRatio),"cssSize"in M&&n(10,a=M.cssSize),"max_size"in M&&n(11,l=M.max_size)},[h,u,g,m,p,_,i,r,s,o,a,l,E]}class wr extends Ye{constructor(e){super(),Je(this,e,mo,go,Ue,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,cssSize:10,max_size:11})}}const po="/zowser/copy.png",bo="/zowser/ome-logomark.svg",vo="/zowser/original-data.svg";function Li(t,e,n){const i=t.slice();return i[15]=e[n],i}function Mi(t){let e,n;return e=new wr({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){Ge(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){Ve(e,i)}}}function Fi(t){let e,n,i,r,s,o,a,l=t[0].source+"",h,u,g=t[0].csv&&Di(t);return{c(){e=v("div"),n=v("span"),n.textContent="Data",i=q(),g&&g.c(),r=q(),s=v("span"),s.textContent="provided by",o=q(),a=v("strong"),h=x(l),u=x("."),b(n,"class","hideOnSmall svelte-16ztcjr"),b(s,"class","hideOnSmall svelte-16ztcjr"),ae(a,"color","grey")},m(m,p){G(m,e,p),d(e,n),d(e,i),g&&g.m(e,null),d(e,r),d(e,s),d(e,o),d(e,a),d(a,h),d(e,u)},p(m,p){m[0].csv?g?g.p(m,p):(g=Di(m),g.c(),g.m(e,r)):g&&(g.d(1),g=null),p&1&&l!==(l=m[0].source+"")&&ye(h,l)},d(m){m&&V(e),g&&g.d()}}}function Di(t){var a;let e,n,i,r=((a=t[0].csv)==null?void 0:a.split("/").pop().replace(".csv",""))+"",s,o;return{c(){e=v("span"),e.textContent="from collection",n=q(),i=v("a"),s=x(r),b(e,"class","hideOnSmall svelte-16ztcjr"),b(i,"title","Show collection in a new tab"),b(i,"href",o=Ui(t[0])),b(i,"target","_blank")},m(l,h){G(l,e,h),G(l,n,h),G(l,i,h),d(i,s)},p(l,h){var u;h&1&&r!==(r=((u=l[0].csv)==null?void 0:u.split("/").pop().replace(".csv",""))+"")&&ye(s,r),h&1&&o!==(o=Ui(l[0]))&&b(i,"href",o)},d(l){l&&(V(e),V(n),V(i))}}}function Ni(t){let e,n,i,r,s;return{c(){e=v("a"),n=v("img"),b(n,"class","icon svelte-16ztcjr"),ae(n,"opacity","0.9"),Bt(n.src,i=vo)||b(n,"src",i),b(e,"title",r="Link to original data: "+t[0].origin),b(e,"href",s=t[0].origin),b(e,"target","_blank")},m(o,a){G(o,e,a),d(e,n)},p(o,a){a&1&&r!==(r="Link to original data: "+o[0].origin)&&b(e,"title",r),a&1&&s!==(s=o[0].origin)&&b(e,"href",s)},d(o){o&&V(e)}}}function Pi(t){let e=t[15].toUpperCase()+"",n,i,r=t[0][`size_${t[15]}`]+"",s,o;return{c(){n=x(e),i=x(":"),s=x(r),o=x("  ")},m(a,l){G(a,n,l),G(a,i,l),G(a,s,l),G(a,o,l)},p(a,l){l&1&&r!==(r=a[0][`size_${a[15]}`]+"")&&ye(s,r)},d(a){a&&(V(n),V(i),V(s),V(o))}}}function Bi(t){let e,n=t[0][`size_${t[15]}`]!==void 0&&Pi(t);return{c(){n&&n.c(),e=pn()},m(i,r){n&&n.m(i,r),G(i,e,r)},p(i,r){i[0][`size_${i[15]}`]!==void 0?n?n.p(i,r):(n=Pi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&V(e),n&&n.d(i)}}}function yo(t){let e,n,i=ut(t[0].written)+"",r;return{c(){e=v("div"),n=x("Data size: "),r=x(i)},m(s,o){G(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=ut(s[0].written)+"")&&ye(r,i)},d(s){s&&V(e)}}}function wo(t){let e,n,i=t[0].shards+"",r;return{c(){e=v("div"),n=x("Shard shape: "),r=x(i)},m(s,o){G(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=s[0].shards+"")&&ye(r,i)},d(s){s&&V(e)}}}function ko(t){let e,n,i=t[0].chunks+"",r;return{c(){e=v("div"),n=x("Chunk shape: "),r=x(i)},m(s,o){G(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=s[0].chunks+"")&&ye(r,i)},d(s){s&&V(e)}}}function Eo(t){let e,n,i,r,s,o,a=t[10](t[0].url)+"",l,h,u,g=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",m,p,_,k=t[8].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",B,E,M,U,Y,Z,K,I,f,c,y,T,R,D,N,ee,F,w=t[3]&&Mi(t),L=t[0].source&&Fi(t),z=t[0].origin&&Ni(t),j=Ne(["t","c","z","y","x"]),Q=[];for(let C=0;C<5;C+=1)Q[C]=Bi(Li(t,j,C));function O(C,H){return C[2]=="chunk_pixels"?ko:C[2]=="shard_pixels"?wo:yo}let $=O(t),S=$(t);return{c(){e=v("div"),n=v("div"),w&&w.c(),i=q(),r=v("div"),s=v("div"),o=v("strong"),h=q(),u=v("div"),p=q(),_=v("div"),B=q(),L&&L.c(),E=q(),M=v("div"),U=v("button"),U.innerHTML=`<img class="icon svelte-16ztcjr" src="${po}"/>`,Y=q(),Z=v("a"),K=v("img"),c=q(),z&&z.c(),y=q(),T=v("div"),R=x(`Image size:
      `);for(let C=0;C<5;C+=1)Q[C].c();D=q(),S.c(),b(n,"class","thumbWrapper svelte-16ztcjr"),b(s,"title",l=t[0].url),b(u,"class",m=ui(t[1]==""?"hideOnSmall":"")+" svelte-16ztcjr"),b(U,"class","no_border svelte-16ztcjr"),b(U,"title","Copy S3 URL to clipboard"),lt(U,"shake",t[7]),b(K,"class","icon svelte-16ztcjr"),ae(K,"opacity","0.9"),Bt(K.src,I=bo)||b(K,"src",I),b(Z,"title","Validate NGFF with 'ome-ngff-validator' in new browser tab"),b(Z,"target","_blank"),b(Z,"href",f="https://ome.github.io/ome-ngff-validator/?source="+t[0].url),b(e,"class","zarr-list-item svelte-16ztcjr")},m(C,H){G(C,e,H),d(e,n),w&&w.m(n,null),d(e,i),d(e,r),d(r,s),d(s,o),o.innerHTML=a,d(r,h),d(r,u),u.innerHTML=g,d(r,p),d(r,_),_.innerHTML=k,d(r,B),L&&L.m(r,null),d(r,E),d(r,M),d(M,U),d(M,Y),d(M,Z),d(Z,K),d(M,c),z&&z.m(M,null),d(r,y),d(r,T),d(T,R);for(let W=0;W<5;W+=1)Q[W]&&Q[W].m(T,null);d(r,D),S.m(r,null),N=!0,ee||(F=[me(n,"click",t[9]),me(U,"click",t[12])],ee=!0)},p(C,[H]){if(C[3]?w?(w.p(C,H),H&8&&re(w,1)):(w=Mi(C),w.c(),re(w,1),w.m(n,null)):w&&(zt(),he(w,1,1,()=>{w=null}),Tt()),(!N||H&1)&&a!==(a=C[10](C[0].url)+"")&&(o.innerHTML=a),(!N||H&1&&l!==(l=C[0].url))&&b(s,"title",l),(!N||H&3)&&g!==(g=(C[0].name?C[0].name.replaceAll(C[1],`<mark>${C[1]}</mark>`):"")+"")&&(u.innerHTML=g),(!N||H&2&&m!==(m=ui(C[1]==""?"hideOnSmall":"")+" svelte-16ztcjr"))&&b(u,"class",m),(!N||H&258)&&k!==(k=C[8].replaceAll(C[1],`<mark>${C[1]}</mark>`)+"")&&(_.innerHTML=k),C[0].source?L?L.p(C,H):(L=Fi(C),L.c(),L.m(r,E)):L&&(L.d(1),L=null),(!N||H&128)&&lt(U,"shake",C[7]),(!N||H&1&&f!==(f="https://ome.github.io/ome-ngff-validator/?source="+C[0].url))&&b(Z,"href",f),C[0].origin?z?z.p(C,H):(z=Ni(C),z.c(),z.m(M,null)):z&&(z.d(1),z=null),H&1){j=Ne(["t","c","z","y","x"]);let W;for(W=0;W<5;W+=1){const ie=Li(C,j,W);Q[W]?Q[W].p(ie,H):(Q[W]=Bi(ie),Q[W].c(),Q[W].m(T,null))}for(;W<5;W+=1)Q[W].d(1)}$===($=O(C))&&S?S.p(C,H):(S.d(1),S=$(C),S&&(S.c(),S.m(r,null)))},i(C){N||(re(w),N=!0)},o(C){he(w),N=!1},d(C){C&&V(e),w&&w.d(),L&&L.d(),z&&z.d(),Et(Q,C),S.d(),ee=!1,Ze(F)}}}function Ui(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Co(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e,a,l,h,u=1;const g=new AbortController;if(r.size_x&&r.size_y){let E=Math.max(r.size_x,r.size_y);for(h=0;E>256;)h+=1,E=E/2;u=r.size_x/r.size_y}function m(){console.log("Clicked on thumbnail"),Ae.setSelectedRow(r)}function p(E){if(s&&E.toLowerCase().includes(s.toLowerCase())){let U=E.toLowerCase(),Y=s.toLowerCase(),Z=U.indexOf(Y),K=Math.max(0,Math.min(Z,E.length-50)),I=E.substring(K,Z);return I+="<mark>",I+=E.substring(Z,Z+Y.length),I+="</mark>",I+=E.substring(Z+Y.length),I}return E.split("/").pop()}$t(async()=>{let E=r.url;r.series0!==void 0&&(E+="/"+r.series0);let M=await jt(E,g.signal);n(3,a=M[0]),n(4,l=M[1]),M[2]}),xn(()=>{g.abort()});let _=!1;function k(E){var M=document.createElement("textarea");M.style.position="fixed",M.value=E,document.body.appendChild(M),M.focus(),M.select();let U=!1;try{U=document.execCommand("copy")}catch{console.log("Oops, unable to copy")}document.body.removeChild(M),U&&(n(7,_=!0),setTimeout(()=>n(7,_=!1),1e3))}const B=E=>k(r.url);return t.$$set=E=>{"rowData"in E&&n(0,r=E.rowData),"textFilter"in E&&n(1,s=E.textFilter),"sortedBy"in E&&n(2,o=E.sortedBy)},t.$$.update=()=>{var E;t.$$.dirty&3&&n(8,i=s!=""&&((E=r.description)!=null&&E.toLowerCase().includes(s.toLowerCase()))?r.description:"")},[r,s,o,a,l,h,u,_,i,m,p,k,B]}class So extends Ye{constructor(e){super(),Je(this,e,Co,Eo,Ue,{rowData:0,textFilter:1,sortedBy:2})}}function Ao(t){let e,n,i,r;return n=new So({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=v("div"),Ge(n.$$.fragment),b(e,"slot","item"),b(e,"style",i=t[12]),b(e,"class","row svelte-1xlep2t")},m(s,o){G(s,e,o),He(n,e,null),r=!0},p(s,o){const a={};o&8193&&(a.rowData=s[0][s[13]]),o&2&&(a.textFilter=s[1]),o&4&&(a.sortedBy=s[2]),n.$set(a),(!r||o&4096&&i!==(i=s[12]))&&b(e,"style",i)},i(s){r||(re(n.$$.fragment,s),r=!0)},o(s){he(n.$$.fragment,s),r=!1},d(s){s&&V(e),Ve(n)}}}function Io(t){let e=!1,n=()=>{e=!1},i,r,s,o=`${t[5]}px`,a,l,h;return rt(t[8]),rt(t[9]),s=new ms({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[Ao,({style:u,index:g})=>({12:u,13:g}),({style:u,index:g})=>(u?4096:0)|(g?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=v("div"),Ge(s.$$.fragment),b(r,"class","imageListContainer svelte-1xlep2t"),ae(r,"height",o)},m(u,g){G(u,r,g),He(s,r,null),t[10](r),a=!0,l||(h=[me(window,"resize",t[8]),me(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],l=!0)},p(u,[g]){g&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,u[4]),i=setTimeout(n,100));const m={};g&32&&(m.height=u[5]),g&1&&(m.itemCount=u[0].length),g&28679&&(m.$$scope={dirty:g,ctx:u}),s.$set(m),g&32&&o!==(o=`${u[5]}px`)&&ae(r,"height",o)},i(u){a||(re(s.$$.fragment,u),a=!0)},o(u){he(s.$$.fragment,u),a=!1},d(u){u&&V(r),Ve(s),t[10](null),l=!1,Ze(h)}}}function zo(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e;function a(k){return r[k].url}let l,h=0,u=0;function g(k){let E=l.offsetTop-20;k.detail.offset-u<0&&h>E&&n(4,h-=1),u=k.detail.offset}function m(){n(5,i=window.innerHeight)}function p(){n(4,h=window.pageYOffset)}function _(k){It[k?"unshift":"push"](()=>{l=k,n(3,l)})}return t.$$set=k=>{"tableRows"in k&&n(0,r=k.tableRows),"textFilter"in k&&n(1,s=k.textFilter),"sortedBy"in k&&n(2,o=k.sortedBy)},n(5,i=0),[r,s,o,l,h,i,a,g,m,p,_]}class To extends Ye{constructor(e){super(),Je(this,e,zo,Io,Ue,{tableRows:0,textFilter:1,sortedBy:2})}}function ji(t){let e,n;return e=new wr({props:{source:t[1],attrs:t[0],cssSize:512,max_size:2e3,thumbDatasetIndex:t[2],thumbAspectRatio:t[3]}}),{c(){Ge(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.source=i[1]),r&1&&(s.attrs=i[0]),r&4&&(s.thumbDatasetIndex=i[2]),r&8&&(s.thumbAspectRatio=i[3]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){Ve(e,i)}}}function Ro(t){let e,n,i=t[0]&&ji(t);return{c(){i&&i.c(),e=pn()},m(r,s){i&&i.m(r,s),G(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&re(i,1)):(i=ji(r),i.c(),re(i,1),i.m(e.parentNode,e)):i&&(zt(),he(i,1,1,()=>{i=null}),Tt())},i(r){n||(re(i),n=!0)},o(r){he(i),n=!1},d(r){r&&V(e),i&&i.d(r)}}}function Oo(t,e,n){let{rowData:i}=e;console.log("ThumbLoader",i);let r,s,o,a=1;if(i.size_x&&i.size_y){let l=Math.max(i.size_x,i.size_y);for(o=0;l>1024;)o+=1,l=l/2;a=i.size_x/i.size_y}else o=void 0,a=1;return $t(async()=>{let l=await jt(i.url);n(0,r=l[0]),n(1,s=l[1]),l[2]}),t.$$set=l=>{"rowData"in l&&n(4,i=l.rowData)},[r,s,o,a,i]}class Lo extends Ye{constructor(e){super(),Je(this,e,Oo,Ro,Ue,{rowData:4})}}function xi(t,e,n){const i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function qi(t){let e,n;return e=new Lo({props:{rowData:t[1]}}),{c(){Ge(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.rowData=i[1]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){Ve(e,i)}}}function Wi(t){let e,n,i=t[2]&&qi(t);return{c(){i&&i.c(),e=pn()},m(r,s){i&&i.m(r,s),G(r,e,s),n=!0},p(r,s){r[2]?i?(i.p(r,s),s&4&&re(i,1)):(i=qi(r),i.c(),re(i,1),i.m(e.parentNode,e)):i&&(zt(),he(i,1,1,()=>{i=null}),Tt())},i(r){n||(re(i),n=!0)},o(r){he(i),n=!1},d(r){r&&V(e),i&&i.d(r)}}}function Hi(t){let e,n=Ne(Object.entries(t[1])),i=[];for(let r=0;r<n.length;r+=1)i[r]=Vi(xi(t,n,r));return{c(){e=v("table");for(let r=0;r<i.length;r+=1)i[r].c()},m(r,s){G(r,e,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,s){if(s&2){n=Ne(Object.entries(r[1]));let o;for(o=0;o<n.length;o+=1){const a=xi(r,n,o);i[o]?i[o].p(a,s):(i[o]=Vi(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(r){r&&V(e),Et(i,r)}}}function Vi(t){let e,n,i=t[5]+"",r,s,o=t[6]+"",a;return{c(){e=v("tr"),n=v("td"),r=x(i),s=v("td"),a=x(o)},m(l,h){G(l,e,h),d(e,n),d(n,r),d(e,s),d(s,a)},p(l,h){h&2&&i!==(i=l[5]+"")&&ye(r,i),h&2&&o!==(o=l[6]+"")&&ye(a,o)},d(l){l&&V(e)}}}function Mo(t){let e,n,i,r,s=t[2],o,a,l,h,u=Wi(t),g=t[1]&&Hi(t);return{c(){e=v("div"),n=v("button"),n.textContent="×",i=q(),r=v("div"),u.c(),o=q(),g&&g.c(),b(n,"class","close svelte-1g3sjso"),b(n,"title","Close"),b(r,"class","scrollable svelte-1g3sjso"),b(e,"id","mypopover"),b(e,"popover",""),b(e,"class","svelte-1g3sjso")},m(m,p){G(m,e,p),d(e,n),d(e,i),d(e,r),u.m(r,null),d(r,o),g&&g.m(r,null),t[4](e),a=!0,l||(h=me(n,"click",t[3]),l=!0)},p(m,[p]){p&4&&Ue(s,s=m[2])?(zt(),he(u,1,1,ke),Tt(),u=Wi(m),u.c(),re(u,1),u.m(r,o)):u.p(m,p),m[1]?g?g.p(m,p):(g=Hi(m),g.c(),g.m(r,null)):g&&(g.d(1),g=null)},i(m){a||(re(u),a=!0)},o(m){he(u),a=!1},d(m){m&&V(e),u.d(m),g&&g.d(),t[4](null),l=!1,h()}}}function Fo(t,e,n){let i,r,s;Ae.subscribeSelectedRow(l=>{console.log("Showing preview for",l),l&&(n(1,r=l),console.log("Showing Thumb preview for",l,r),n(2,s=r.url),i.showPopover())});function o(){i.hidePopover()}$t(()=>{console.log("Mounted popover",i),i&&i.addEventListener("toggle",l=>{l.newState==="open"||(console.log("Popover has been hidden"),Ae.setSelectedRow(null))})});function a(l){It[l?"unshift":"push"](()=>{i=l,n(0,i)})}return[i,r,s,o,a]}class Do extends Ye{constructor(e){super(),Je(this,e,Fo,Mo,Ue,{})}}const No="/zowser/selectCaret.svg",Po="/zowser/samples/sample_zarrs_hydrated.csv",Bo="/zowser/ome-main-nav.svg";function Uo(t){let e,n,i,r,s,o,a,l,h,u,g,m,p;return{c(){e=v("base"),n=q(),i=v("nav"),r=v("a"),s=v("img"),a=q(),l=v("a"),h=v("h2"),h.textContent="Zowser — an OME-Zarr browser",u=q(),g=v("div"),m=q(),p=v("a"),p.textContent="About",b(e,"href",t[0]),b(s,"alt","OME Logo"),Bt(s.src,o=Bo)||b(s,"src",o),b(s,"class","svelte-qxzspo"),b(r,"class","logolink svelte-qxzspo"),b(r,"href",t[0]),b(h,"class","svelte-qxzspo"),b(l,"href",t[0]),b(l,"class","svelte-qxzspo"),ae(g,"flex","1"),b(p,"href","about/"),b(p,"class","svelte-qxzspo"),b(i,"class","svelte-qxzspo")},m(_,k){G(_,e,k),G(_,n,k),G(_,i,k),d(i,r),d(r,s),d(i,a),d(i,l),d(l,h),d(i,u),d(i,g),d(i,m),d(i,p)},p:ke,i:ke,o:ke,d(_){_&&(V(e),V(n),V(i))}}}function jo(t){let e="/zowser/";return console.log("Nav base",e),[e]}class xo extends Ye{constructor(e){super(),Je(this,e,jo,Uo,Ue,{})}}function Ki(t){let e=t[0].plate_count+"",n,i;return{c(){n=x(e),i=x(" plates")},m(r,s){G(r,n,s),G(r,i,s)},p(r,s){s&1&&e!==(e=r[0].plate_count+"")&&ye(n,e)},d(r){r&&(V(n),V(i))}}}function qo(t){let e,n,i,r,s,o,a,l=t[0].source+"",h,u,g,m,p,_,k=ut(t[0].bytes)+"",B,E,M,U,Y,Z,K,I,f=t[0].image_count+"",c,y,T,R,D,N,ee,F,w,L=t[0].plate_count&&Ki(t);return{c(){e=v("div"),n=v("label"),i=v("img"),o=q(),a=v("div"),h=x(l),u=q(),g=v("br"),m=q(),p=v("span"),_=x("("),B=x(k),E=x(")"),U=v("input"),Z=q(),K=v("div"),L&&L.c(),I=q(),c=x(f),y=x(" images"),T=q(),R=v("label"),D=v("input"),N=q(),ee=v("span"),ee.textContent="×",b(i,"title",r=t[0].url),b(i,"class","sourceLogo svelte-1iuq3t7"),b(i,"alt","Source logo"),Bt(i.src,s=fi(t[0].source))||b(i,"src",s),b(p,"title",M=t[0].child_csv.length+" collections"),b(U,"class","source svelte-1iuq3t7"),b(U,"type","radio"),b(U,"name","source"),U.value=Y=t[0].source,b(K,"class","tooltip svelte-1iuq3t7"),b(n,"class","svelte-1iuq3t7"),b(D,"type","radio"),b(D,"name","source"),D.value="",b(D,"class","svelte-1iuq3t7"),b(ee,"title","Clear filter"),b(R,"class","clear svelte-1iuq3t7"),b(e,"class","source svelte-1iuq3t7")},m(z,j){G(z,e,j),d(e,n),d(n,i),d(n,o),d(n,a),d(a,h),d(a,u),d(a,g),d(a,m),d(a,p),d(p,_),d(p,B),d(p,E),d(a,U),d(a,Z),d(a,K),L&&L.m(K,null),d(K,I),d(K,c),d(K,y),d(e,T),d(e,R),d(R,D),d(R,N),d(R,ee),F||(w=[me(U,"change",function(){_n(t[1])&&t[1].apply(this,arguments)}),me(D,"change",function(){_n(t[1])&&t[1].apply(this,arguments)})],F=!0)},p(z,[j]){t=z,j&1&&r!==(r=t[0].url)&&b(i,"title",r),j&1&&!Bt(i.src,s=fi(t[0].source))&&b(i,"src",s),j&1&&l!==(l=t[0].source+"")&&ye(h,l),j&1&&k!==(k=ut(t[0].bytes)+"")&&ye(B,k),j&1&&M!==(M=t[0].child_csv.length+" collections")&&b(p,"title",M),j&1&&Y!==(Y=t[0].source)&&(U.value=Y),t[0].plate_count?L?L.p(t,j):(L=Ki(t),L.c(),L.m(K,I)):L&&(L.d(1),L=null),j&1&&f!==(f=t[0].image_count+"")&&ye(c,f)},i:ke,o:ke,d(z){z&&V(e),L&&L.d(),F=!1,Ze(w)}}}function Wo(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class Ho extends Ye{constructor(e){super(),Je(this,e,Wo,qo,Ue,{source:0,handleFilter:1})}}function Vo(t,e,n){const i=t.slice();return i[30]=e[n],i}function Gi(t,e,n){const i=t.slice();return i[33]=e[n],i}function Ji(t,e,n){const i=t.slice();return i[33]=e[n],i}function Yi(t,e,n){const i=t.slice();return i[38]=e[n],i}function Zi(t,e,n){const i=t.slice();return i[41]=e[n],i}function Ko(t){let e,n,i,r=t[14].split("/").pop()+"",s,o,a=t[14]!=Ln&&Jo(t);return{c(){e=v("div"),n=x(`Showing Collection:
          `),i=v("a"),s=x(r),o=q(),a&&a.c(),b(i,"href",t[14]),ae(e,"font-size","90%")},m(l,h){G(l,e,h),d(e,n),d(e,i),d(i,s),d(e,o),a&&a.m(e,null)},p(l,h){l[14]!=Ln&&a.p(l,h)},d(l){l&&V(e),a&&a.d()}}}function Go(t){let e,n=ut(t[3])+"",i,r;return{c(){e=v("strong"),i=x(n),r=x(`
        of public bioimage data in Zarr v3 and sharding, with distributed hosting.`),ae(e,"font-weight","600")},m(s,o){G(s,e,o),d(e,i),G(s,r,o)},p(s,o){o[0]&8&&n!==(n=ut(s[3])+"")&&ye(i,n)},d(s){s&&(V(e),V(r))}}}function Jo(t){let e,n=ut(t[3])+"",i,r;return{c(){e=x("("),i=x(n),r=x(")")},m(s,o){G(s,e,o),G(s,i,o),G(s,r,o)},p(s,o){o[0]&8&&n!==(n=ut(s[3])+"")&&ye(i,n)},d(s){s&&(V(e),V(i),V(r))}}}function Qi(t){let e,n;return e=new Ho({props:{source:t[41],handleFilter:t[17]}}),{c(){Ge(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r[0]&2&&(s.source=i[41]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){Ve(e,i)}}}function Xi(t){let e,n,i,r,s,o,a,l,h,u=Ne(Ae.getCsvSourceList(t[13])),g=[];for(let m=0;m<u.length;m+=1)g[m]=$i(Yi(t,u,m));return{c(){e=v("div"),n=v("select"),i=v("option"),i.textContent="Collection";for(let m=0;m<g.length;m+=1)g[m].c();r=q(),s=v("div"),o=v("button"),a=x("×"),i.__value="",Ce(i,i.__value),b(n,"name","collection"),b(n,"class","svelte-cmksur"),t[11]===void 0&&rt(()=>t[24].call(n)),b(o,"title","Clear Filter"),ae(o,"visibility",t[11]!==""?"visible":"hidden"),b(o,"class","svelte-cmksur"),b(s,"class","svelte-cmksur"),b(e,"class","selectWrapper svelte-cmksur")},m(m,p){G(m,e,p),d(e,n),d(n,i);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(n,null);st(n,t[11],!0),d(e,r),d(e,s),d(s,o),d(o,a),l||(h=[me(n,"change",t[24]),me(n,"change",t[19]),me(o,"click",t[19])],l=!0)},p(m,p){if(p[0]&8192){u=Ne(Ae.getCsvSourceList(m[13]));let _;for(_=0;_<u.length;_+=1){const k=Yi(m,u,_);g[_]?g[_].p(k,p):(g[_]=$i(k),g[_].c(),g[_].m(n,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=u.length}p[0]&10240&&st(n,m[11]),p[0]&2048&&ae(o,"visibility",m[11]!==""?"visible":"hidden")},d(m){m&&V(e),Et(g,m),l=!1,Ze(h)}}}function $i(t){let e,n=(t[38].source==t[13]?nr(t[38].url):t[38].source)+"",i,r,s=t[38].image_count+"",o,a,l;return{c(){e=v("option"),i=x(n),r=x(" ("),o=x(s),a=x(`)
                `),e.__value=l=t[38].url,Ce(e,e.__value)},m(h,u){G(h,e,u),d(e,i),d(e,r),d(e,o),d(e,a)},p(h,u){u[0]&8192&&n!==(n=(h[38].source==h[13]?nr(h[38].url):h[38].source)+"")&&ye(i,n),u[0]&8192&&s!==(s=h[38].image_count+"")&&ye(o,s),u[0]&8192&&l!==(l=h[38].url)&&(e.__value=l,Ce(e,e.__value))},d(h){h&&V(e)}}}function er(t){let e,n=t[33]+"",i,r;return{c(){e=v("option"),i=x(n),e.__value=r=t[4][t[33]],Ce(e,e.__value)},m(s,o){G(s,e,o),d(e,i)},p(s,o){o[0]&16&&n!==(n=s[33]+"")&&ye(i,n),o[0]&16&&r!==(r=s[4][s[33]])&&(e.__value=r,Ce(e,e.__value))},d(s){s&&V(e)}}}function tr(t,e){let n,i=e[33]+"",r,s;return{key:t,first:null,c(){n=v("option"),r=x(i),n.__value=s=e[5][e[33]],Ce(n,n.__value),this.first=n},m(o,a){G(o,n,a),d(n,r)},p(o,a){e=o,a[0]&32&&i!==(i=e[33]+"")&&ye(r,i),a[0]&32&&s!==(s=e[5][e[33]])&&(n.__value=s,Ce(n,n.__value))},d(o){o&&V(n)}}}function Yo(t){let e;return{c(){e=v("option"),e.textContent=`Size: ${t[30].toUpperCase()}`,e.__value="size_"+t[30],Ce(e,e.__value)},m(n,i){G(n,e,i)},p:ke,d(n){n&&V(e)}}}function Zo(t){let e,n,i,r,s,o,a,l,h,u,g,m,p,_,k,B,E,M,U,Y=t[13]!==""&&Ae.getCsvSourceList(t[13]).length>0,Z,K,I,f,c=t[12]!==""?"All Dimensions":"Dimension Count",y,T,R,D,N,ee,F,w,L,z,j,Q,O,$,S=t[10]==""?"Organism":"All Organisms",C,H,W,ie,P,X,ue,de,te,pe,_e=t[9]==""?"Imaging Modality":"All Modalities",ce,Pe,be=[],je=new Map,Ke,Te,se,ve,Qe,le,et,xe,Xe,Oe,Se,Le,Me,ct,Ie,tt,$e,$n,nn,ft,ei,bt,nt,ti,rn=t[0].length+"",vn,ni,yn,ii,ri,ht,qe,wn,si;e=new Do({});function kr(A,J){return A[14]==Ln?Go:Ko}let sn=kr(t)(t),dt=Ne(t[1]),we=[];for(let A=0;A<dt.length;A+=1)we[A]=Qi(Zi(t,dt,A));const Er=A=>he(we[A],1,1,()=>{we[A]=null});let Be=Y&&Xi(t),vt=Ne(Object.keys(t[4]).sort()),Fe=[];for(let A=0;A<vt.length;A+=1)Fe[A]=er(Ji(t,vt,A));let on=Ne(Object.keys(t[5]).sort());const oi=A=>A[33];for(let A=0;A<on.length;A+=1){let J=Gi(t,on,A),ge=oi(J);je.set(ge,be[A]=tr(ge,J))}let Cr=Ne(["x","y","z","c","t"]),Ot=[];for(let A=0;A<5;A+=1)Ot[A]=Yo(Vo(t,Cr,A));return ft=new ls({props:{toggleAscending:t[15],sortAscending:t[7]}}),ht=new To({props:{tableRows:t[0],textFilter:t[8],sortedBy:t[6]}}),{c(){Ge(e.$$.fragment),n=q(),i=v("main"),r=v("div"),s=v("h3"),sn.c(),o=q(),a=v("div"),l=v("input"),h=q(),u=v("button"),g=x("×"),m=q(),p=v("div");for(let A=0;A<we.length;A+=1)we[A].c();_=q(),k=v("div"),B=v("div"),E=v("div"),M=v("div"),M.textContent="Filter by:",U=q(),Be&&Be.c(),Z=q(),K=v("div"),I=v("select"),f=v("option"),y=x(c),T=v("hr"),R=v("option"),R.textContent="2D",D=v("option"),D.textContent="3D",N=v("option"),N.textContent="4D",ee=v("option"),ee.textContent="5D",F=q(),w=v("div"),L=v("button"),z=x("×"),j=q(),Q=v("div"),O=v("select"),$=v("option"),C=x(S),H=v("hr");for(let A=0;A<Fe.length;A+=1)Fe[A].c();W=q(),ie=v("div"),P=v("button"),X=x("×"),ue=q(),de=v("div"),te=v("select"),pe=v("option"),ce=x(_e),Pe=v("hr");for(let A=0;A<be.length;A+=1)be[A].c();Ke=q(),Te=v("div"),se=v("button"),ve=x("×"),Qe=q(),le=v("div"),et=q(),xe=v("div"),xe.textContent="Sort by:",Xe=q(),Oe=v("div"),Se=v("select"),Le=v("option"),Le.textContent="--",Me=v("hr");for(let A=0;A<5;A+=1)Ot[A].c();ct=v("hr"),Ie=v("option"),Ie.textContent="Data Size (bytes)",tt=v("option"),tt.textContent="Chunk Size (pixels)",$e=v("option"),$e.textContent="Shard Size (pixels)",$n=q(),nn=v("div"),Ge(ft.$$.fragment),ei=q(),bt=v("div"),nt=v("h3"),ti=x("Showing "),vn=x(rn),ni=x(" out of "),yn=x(t[2]),ii=x(" images"),ri=q(),Ge(ht.$$.fragment),ae(s,"text-align","center"),b(l,"placeholder","Filter by Name or Description"),b(l,"name","textFilter"),b(l,"class","svelte-cmksur"),b(u,"title","Clear Filter"),ae(u,"visibility",t[8]!==""?"visible":"hidden"),b(u,"class","svelte-cmksur"),b(a,"class","textInputWrapper svelte-cmksur"),b(p,"class","sources svelte-cmksur"),b(r,"class","summary svelte-cmksur"),ae(M,"white-space","nowrap"),f.__value="",Ce(f,f.__value),R.__value="2",Ce(R,R.__value),D.__value="3",Ce(D,D.__value),N.__value="4",Ce(N,N.__value),ee.__value="5",Ce(ee,ee.__value),b(I,"class","svelte-cmksur"),t[12]===void 0&&rt(()=>t[25].call(I)),b(L,"title","Clear Filter"),ae(L,"visibility",t[12]!==""?"visible":"hidden"),b(L,"class","svelte-cmksur"),b(w,"class","svelte-cmksur"),b(K,"class","selectWrapper svelte-cmksur"),$.__value="",Ce($,$.__value),b(O,"class","svelte-cmksur"),t[10]===void 0&&rt(()=>t[26].call(O)),b(P,"title","Clear Filter"),ae(P,"visibility",t[10]!==""?"visible":"hidden"),b(P,"class","svelte-cmksur"),b(ie,"class","svelte-cmksur"),b(Q,"class","selectWrapper svelte-cmksur"),pe.__value="",Ce(pe,pe.__value),b(te,"class","svelte-cmksur"),t[9]===void 0&&rt(()=>t[27].call(te)),b(se,"title","Clear Filter"),ae(se,"visibility",t[9]!==""?"visible":"hidden"),b(se,"class","svelte-cmksur"),b(Te,"class","svelte-cmksur"),b(de,"class","selectWrapper svelte-cmksur"),b(le,"class","clear"),Le.__value="",Ce(Le,Le.__value),Ie.__value="written",Ce(Ie,Ie.__value),tt.__value="chunk_pixels",Ce(tt,tt.__value),$e.__value="shard_pixels",Ce($e,$e.__value),b(Se,"class","svelte-cmksur"),b(nn,"class","svelte-cmksur"),b(Oe,"class","selectWrapper svelte-cmksur"),b(E,"class","filters svelte-cmksur"),b(B,"class","sidebar svelte-cmksur"),ae(nt,"margin-left","15px"),b(nt,"class","svelte-cmksur"),b(bt,"class","results svelte-cmksur"),b(k,"class","sidebarContainer svelte-cmksur"),ae(i,"--form-select-bg-img","url('"+No+"')"),b(i,"class","svelte-cmksur")},m(A,J){He(e,A,J),G(A,n,J),G(A,i,J),d(i,r),d(r,s),sn.m(s,null),d(r,o),d(r,a),d(a,l),Ce(l,t[8]),d(a,h),d(a,u),d(u,g),d(r,m),d(r,p);for(let ge=0;ge<we.length;ge+=1)we[ge]&&we[ge].m(p,null);d(i,_),d(i,k),d(k,B),d(B,E),d(E,M),d(E,U),Be&&Be.m(E,null),d(E,Z),d(E,K),d(K,I),d(I,f),d(f,y),d(I,T),d(I,R),d(I,D),d(I,N),d(I,ee),st(I,t[12],!0),d(K,F),d(K,w),d(w,L),d(L,z),d(E,j),d(E,Q),d(Q,O),d(O,$),d($,C),d(O,H);for(let ge=0;ge<Fe.length;ge+=1)Fe[ge]&&Fe[ge].m(O,null);st(O,t[10],!0),d(Q,W),d(Q,ie),d(ie,P),d(P,X),d(E,ue),d(E,de),d(de,te),d(te,pe),d(pe,ce),d(te,Pe);for(let ge=0;ge<be.length;ge+=1)be[ge]&&be[ge].m(te,null);st(te,t[9],!0),d(de,Ke),d(de,Te),d(Te,se),d(se,ve),d(E,Qe),d(E,le),d(E,et),d(E,xe),d(E,Xe),d(E,Oe),d(Oe,Se),d(Se,Le),d(Se,Me);for(let ge=0;ge<5;ge+=1)Ot[ge]&&Ot[ge].m(Se,null);d(Se,ct),d(Se,Ie),d(Se,tt),d(Se,$e),d(Oe,$n),d(Oe,nn),He(ft,nn,null),d(k,ei),d(k,bt),d(bt,nt),d(nt,ti),d(nt,vn),d(nt,ni),d(nt,yn),d(nt,ii),d(bt,ri),He(ht,bt,null),qe=!0,wn||(si=[me(l,"input",t[23]),me(l,"input",t[22]),me(u,"click",t[22]),me(I,"change",t[25]),me(I,"change",t[18]),me(L,"click",t[18]),me(O,"change",t[26]),me(O,"change",t[20]),me(P,"click",t[20]),me(te,"change",t[27]),me(te,"change",t[21]),me(se,"click",t[21]),me(Se,"change",t[16])],wn=!0)},p(A,J){if(sn.p(A,J),J[0]&256&&l.value!==A[8]&&Ce(l,A[8]),(!qe||J[0]&256)&&ae(u,"visibility",A[8]!==""?"visible":"hidden"),J[0]&131074){dt=Ne(A[1]);let fe;for(fe=0;fe<dt.length;fe+=1){const Lt=Zi(A,dt,fe);we[fe]?(we[fe].p(Lt,J),re(we[fe],1)):(we[fe]=Qi(Lt),we[fe].c(),re(we[fe],1),we[fe].m(p,null))}for(zt(),fe=dt.length;fe<we.length;fe+=1)Er(fe);Tt()}if(J[0]&8192&&(Y=A[13]!==""&&Ae.getCsvSourceList(A[13]).length>0),Y?Be?Be.p(A,J):(Be=Xi(A),Be.c(),Be.m(E,Z)):Be&&(Be.d(1),Be=null),(!qe||J[0]&4096)&&c!==(c=A[12]!==""?"All Dimensions":"Dimension Count")&&ye(y,c),J[0]&4096&&st(I,A[12]),(!qe||J[0]&4096)&&ae(L,"visibility",A[12]!==""?"visible":"hidden"),(!qe||J[0]&1024)&&S!==(S=A[10]==""?"Organism":"All Organisms")&&ye(C,S),J[0]&16){vt=Ne(Object.keys(A[4]).sort());let fe;for(fe=0;fe<vt.length;fe+=1){const Lt=Ji(A,vt,fe);Fe[fe]?Fe[fe].p(Lt,J):(Fe[fe]=er(Lt),Fe[fe].c(),Fe[fe].m(O,null))}for(;fe<Fe.length;fe+=1)Fe[fe].d(1);Fe.length=vt.length}J[0]&1040&&st(O,A[10]),(!qe||J[0]&1024)&&ae(P,"visibility",A[10]!==""?"visible":"hidden"),(!qe||J[0]&512)&&_e!==(_e=A[9]==""?"Imaging Modality":"All Modalities")&&ye(ce,_e),J[0]&32&&(on=Ne(Object.keys(A[5]).sort()),be=ar(be,J,oi,1,A,on,je,te,Pr,tr,null,Gi)),J[0]&544&&st(te,A[9]),(!qe||J[0]&512)&&ae(se,"visibility",A[9]!==""?"visible":"hidden");const ge={};J[0]&128&&(ge.sortAscending=A[7]),ft.$set(ge),(!qe||J[0]&1)&&rn!==(rn=A[0].length+"")&&ye(vn,rn),(!qe||J[0]&4)&&ye(yn,A[2]);const ln={};J[0]&1&&(ln.tableRows=A[0]),J[0]&256&&(ln.textFilter=A[8]),J[0]&64&&(ln.sortedBy=A[6]),ht.$set(ln)},i(A){if(!qe){re(e.$$.fragment,A);for(let J=0;J<dt.length;J+=1)re(we[J]);re(ft.$$.fragment,A),re(ht.$$.fragment,A),qe=!0}},o(A){he(e.$$.fragment,A),we=we.filter(Boolean);for(let J=0;J<we.length;J+=1)he(we[J]);he(ft.$$.fragment,A),he(ht.$$.fragment,A),qe=!1},d(A){A&&(V(n),V(i)),Ve(e,A),sn.d(),Et(we,A),Be&&Be.d(),Et(Fe,A);for(let J=0;J<be.length;J+=1)be[J].d();Et(Ot,A),Ve(ft),Ve(ht),wn=!1,Ze(si)}}}function nr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function Qo(t,e,n){let i,r,s,o,a,l,h=Po,u=[],g=[],m=0,p=0,_={},k={};Ae.subscribe(F=>{n(0,u=Y(F)),n(1,g=Ae.getCsvSourceList()),n(2,m=F.length),n(3,p=F.reduce((w,L)=>w+parseInt(L.written)||0,0))}),_r.subscribe(F=>{let w={};for(const[L,z]of Object.entries(F))w[z]=L;n(4,_=w)}),gr.subscribe(F=>{let w={};for(const[L,z]of Object.entries(F))w[z]=L;n(5,k=w)}),cr(h,Ae);let B="",E=!1;function M(){n(7,E=!E),Ae.sortTable(B,E)}function U(F){n(6,B=F.target.value),B===""?Ae.sortTable("index",!0):Ae.sortTable(B,E)}function Y(F){if(i!==""&&(F=F.filter(w=>w.dim_count==i)),s!=="")F=F.filter(w=>w.csv==s);else if(r!==""){let w=Ae.getCsvSourceList(r),L=[r,...w.map(z=>z.source)];F=F.filter(z=>L.includes(z.source))}if(o!==""&&(F=F.filter(w=>w.organismId==o)),a!=""&&(F=F.filter(w=>w.fbbiId==a)),l&&l!=""){let w=l.toLowerCase();F=F.filter(L=>{var z,j;return L.url.toLowerCase().includes(w)||((z=L.description)==null?void 0:z.toLowerCase().includes(w))||((j=L.name)==null?void 0:j.toLowerCase().includes(w))})}return F}function Z(F){n(13,r=F.target.value||""),n(11,s=""),console.log("filterSource",r,s),n(0,u=Y(Ae.getRows()))}function K(F){n(12,i=F.target.value||""),n(0,u=Y(Ae.getRows()))}function I(F){n(11,s=F.target.value||""),n(0,u=Y(Ae.getRows()))}function f(F){n(10,o=F.target.value||""),n(0,u=Y(Ae.getRows()))}function c(F){n(9,a=F.target.value||""),n(0,u=Y(Ae.getRows()))}function y(F){n(8,l=F.target.value),n(0,u=Y(Ae.getRows()))}function T(){l=this.value,n(8,l)}function R(){s=un(this),n(11,s),n(13,r)}function D(){i=un(this),n(12,i)}function N(){o=un(this),n(10,o),n(4,_)}function ee(){a=un(this),n(9,a),n(5,k)}return t.$$.update=()=>{t.$$.dirty[0]&1&&u.some(F=>F.source)},n(12,i=""),n(13,r=""),n(11,s=""),n(10,o=""),n(9,a=""),n(8,l=""),[u,g,m,p,_,k,B,E,l,a,o,s,i,r,h,M,U,Z,K,I,f,c,y,T,R,D,N,ee]}class Xo extends Ye{constructor(e){super(),Je(this,e,Qo,Zo,Ue,{},null,[-1,-1])}}const $o="/zowser/nfdi_rgb_Wortmarke_Zusatz_quer.png",el="/zowser/czi-logo-chan-zuckerberg-initiative-logo.png";function tl(t){let e,n,i;return{c(){e=v("base"),n=q(),i=v("div"),i.innerHTML=`<h2>Introduction</h2> <p>Zowser is an OME-Zarr browser based on the <a href="https://forum.image.sc/t/ome2024-ngff-challenge/97363">2024 OME-NGFF Challenge</a>, conceived at the
    <a href="https://www.openmicroscopy.org/events/ome-community-meeting-2024/">OME Annual Community Meeting</a>
    in Dundee in May 2024.</p> <h2>Acknowledgements</h2> <p>Coordination of the challenge was supported by the <a href="https://www.nfdi.de/">German National Research Data Initiative (NFDI)</a>
    and the
    <a href="https://chanzuckerberg.com/">Chan Zuckerberg Initiative</a>:</p> <table><tr><td><img src="${$o}" alt="NFDI Logo" width="45%"/></td> <td><img src="${el}" alt="Chan Zuckerberg Initiative Logo" width="45%"/></td></tr></table>`,b(e,"href",t[0]),b(i,"class","svelte-zlrnwt")},m(r,s){G(r,e,s),G(r,n,s),G(r,i,s)},p:ke,i:ke,o:ke,d(r){r&&(V(e),V(n),V(i))}}}function nl(t){return["/zowser/"]}class il extends Ye{constructor(e){super(),Je(this,e,nl,tl,Ue,{})}}function rl(t){let e,n;return e=new Xo({}),{c(){Ge(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){Ve(e,i)}}}function sl(t){let e,n;return e=new il({}),{c(){Ge(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){Ve(e,i)}}}function ol(t){let e,n,i,r,s,o;n=new xo({});const a=[sl,rl],l=[];function h(u,g){return u[0].endsWith("/about/")?0:1}return r=h(t),s=l[r]=a[r](t),{c(){e=v("div"),Ge(n.$$.fragment),i=q(),s.c(),b(e,"class","app svelte-1mc4mod")},m(u,g){G(u,e,g),He(n,e,null),d(e,i),l[r].m(e,null),o=!0},p:ke,i(u){o||(re(n.$$.fragment,u),re(s),o=!0)},o(u){he(n.$$.fragment,u),he(s),o=!1},d(u){u&&V(e),Ve(n),l[r].d()}}}function ll(t){return[window.location.pathname]}class al extends Ye{constructor(e){super(),Je(this,e,ll,ol,Ue,{})}}new al({target:document.getElementById("app")});
